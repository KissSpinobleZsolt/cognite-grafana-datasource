/*! For license information please see module.js.LICENSE.txt */
define(["react","lodash","@grafana/ui","@grafana/data","@grafana/runtime"],(function(e,t,n,r,s){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=76)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,t,n){var r,s;r=this,s=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach((function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)}))}function s(){this.reset("")}function o(e,t,o){if(e instanceof r){var a=e;o=t}else a=r.fromCompiled(e,t);for(var i in this.grammar=a,this.options={keepHistory:!1,lexer:a.lexer||new s},o||{})this.options[i]=o[i];this.lexer=this.options.lexer,this.lexerState=void 0;var c=new n(a,0);this.table=[c],c.wants[a.start]=[],c.predict(a.start),c.process(),this.current=0}function a(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=void 0===e?this.symbols.map(a).join(" "):this.symbols.slice(0,e).map(a).join(" ")+" ● "+this.symbols.slice(e).map(a).join(" ");return this.name+" → "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,s=0;s<t.length;s++){var a=t[s];if(a.isComplete){if(a.finish(),a.data!==o.fail){for(var i=a.wantedBy,c=i.length;c--;){var l=i[c];this.complete(l,a)}if(a.reference===this.index){var u=a.rule.name;(this.completed[u]=this.completed[u]||[]).push(a)}}}else{if("string"!=typeof(u=a.rule.symbols[a.dot])){this.scannable.push(a);continue}if(n[u]){if(n[u].push(a),r.hasOwnProperty(u)){var f=r[u];for(c=0;c<f.length;c++){var p=f[c];this.complete(a,p)}}}else n[u]=[a],this.predict(u)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var s=n[r],o=this.wants[e],a=new t(s,0,this.index,o);this.states.push(a)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var s=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var o=new r(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),n);return o.lexer=s,o},s.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(e,t){var n=this.buffer;if("string"==typeof n){var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),s=n.indexOf("\n",this.index);-1===s&&(s=n.length);var o=this.index-this.lastLineBreak,a=String(this.line).length;return t+=" at line "+this.line+" col "+o+":\n\n",t+=r.map((function(e,t){return i(this.line-r.length+t+1,a)+" "+e}),this).join("\n"),t+="\n"+i("",a+o)+"^\n"}return t+" at index "+(this.index-1);function i(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},o.fail={},o.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(e){var o=new n(this.grammar,this.current+1);throw this.table.push(o),(c=new Error(this.reportLexerError(e))).offset=this.current,c.token=e.token,c}var a=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var i=this.current+1;o=new n(this.grammar,i),this.table.push(o);for(var c,l=void 0!==t.text?t.text:t.value,u=r.constructor===s?t.value:t,f=a.scannable,p=f.length;p--;){var m=f[p],b=m.rule.symbols[m.dot];if(b.test?b.test(u):b.type?b.type===t.type:b.literal===l){var d=m.nextState({data:u,token:t,isToken:!0,reference:i-1});o.states.push(d)}}if(o.process(),0===o.states.length)throw(c=new Error(this.reportError(t))).offset=this.current,c.token=t,c;this.options.keepHistory&&(a.lexerState=r.save()),this.current++}return a&&(this.lexerState=r.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},o.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},o.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,s=this.table[r],o=s.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t}));return 0===o.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(s.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),o.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],r=t.rule.symbols[t.dot],s=this.getSymbolDisplay(r);n.push("A "+s+" based on:"),this.displayStateStack(e,n)}),this)),n.push(""),n.join("\n")},o.prototype.displayStateStack=function(e,t){for(var n,r=0,s=0;s<e.length;s++){var o=e[s],a=o.rule.toString(o.dot);a===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+a)),n=a}},o.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},o.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),s=this.buildFirstStateStack(n,r);return null===s?null:[e].concat(s)},o.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},o.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},o.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},o.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==o.fail&&e.push(n)})),e.map((function(e){return e.data}))},{Parser:o,Grammar:r,Rule:e}},e.exports?e.exports=s():r.nearley=s()},function(e,t,n){"use strict";var r=n(9),s=n(10),o=n(35),a=n(37);e.exports=function(e){var t=s(e),n=r(e),i=o(e),c=a(e);return function(r,s,o){s=e.iteratee(s),o?void 0!==(o=e.cloneDeep(o)).leafsOnly&&(o.leavesOnly=o.leafsOnly):o={},o.onTrue||(o.onTrue={}),o.onFalse||(o.onFalse={}),o.onUndefined||(o.onUndefined={}),void 0!==o.childrenPath&&(void 0===o.onTrue.skipChildren&&(o.onTrue.skipChildren=!1),void 0===o.onUndefined.skipChildren&&(o.onUndefined.skipChildren=!1),void 0===o.onFalse.skipChildren&&(o.onFalse.skipChildren=!1),void 0===o.onTrue.cloneDeep&&(o.onTrue.cloneDeep=!0),void 0===o.onUndefined.cloneDeep&&(o.onUndefined.cloneDeep=!0),void 0===o.onFalse.cloneDeep&&(o.onFalse.cloneDeep=!0));var a,l={pathFormat:(o=e.merge({checkCircular:!1,keepCircular:!0,leavesOnly:void 0===o.childrenPath,condense:!0,cloneDeep:e.cloneDeep,pathFormat:"string",onTrue:{skipChildren:!0,cloneDeep:!0,keepIfEmpty:!0},onUndefined:{skipChildren:!1,cloneDeep:!1,keepIfEmpty:!1},onFalse:{skipChildren:!0,cloneDeep:!1,keepIfEmpty:!1}},o)).pathFormat,checkCircular:o.checkCircular,childrenPath:o.childrenPath,includeRoot:o.includeRoot,rootIsChildren:o.rootIsChildren,callbackAfterIterate:!0,leavesOnly:!1},u=e.isArray(r)?[]:e.isObject(r)?{}:null,f={},p=[];return t(r,(function(t,r,i,c){delete c.break;var l=n(c.path);if(!c.afterIterate){if(c.isCircular)return e.unset(u,c.path),o.keepCircular&&p.push([c.path,c.circularParent.path]),!1;var m=!o.leavesOnly||c.isLeaf?s(t,r,i,c):void 0;return e.isObject(m)||(m=void 0===m?e.clone(o.onUndefined):m?e.clone(o.onTrue):e.clone(o.onFalse)),void 0===m.empty&&(m.empty=!0),void 0!==l?(f[l]=m,a||(a={skipChildren:!1,cloneDeep:!1,keepIfEmpty:!1,empty:m.empty})):a=m,!m.keepIfEmpty&&m.skipChildren||(o.cloneDeep&&m.cloneDeep?void 0!==c.path?e.set(u,c.path,o.cloneDeep(t)):u=o.cloneDeep(t):void 0!==c.path?e.set(u,c.path,e.isArray(t)?[]:e.isPlainObject(t)?{}:t):u=e.isArray(t)?[]:e.isPlainObject(t)?{}:t),!m.skipChildren}!c.afterIterate||c.isCircular||(void 0===l&&a.empty&&!a.keepIfEmpty?u=null:void 0!==l&&f[l].empty&&!f[l].keepIfEmpty?e.unset(u,c.path):(e.eachRight(c.parents,(function(e){var t=n(e.path);if(void 0===t||!f[t].empty)return!1;f[t].empty=!1})),a.empty=!1))}),l),a&&a.empty&&!a.keepIfEmpty&&(u=null),e.each(p,(function(t){var n;(void 0===t[1]||c(u,t[1]))&&(n=e.has(o,"replaceCircularBy")?o.replaceCircularBy:void 0!==t[1]?e.get(u,t[1]):u,e.set(u,t[0],n))})),o.condense&&(u=i(u,{checkCircular:o.checkCircular})),!e.isArray(u)||u.length||l.includeRoot?u:null}}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t){var n=1e3,r=6e4,s=60*r,o=24*s;function a(e,t,n,r){var s=t>=1.5*n;return Math.round(e/n)+" "+r+(s?"s":"")}e.exports=function(e,t){t=t||{};var i=typeof e;if("string"===i&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===i&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return a(e,t,o,"day");if(t>=s)return a(e,t,s,"hour");if(t>=r)return a(e,t,r,"minute");if(t>=n)return a(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=r)return Math.round(e/r)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=/\D/,s=/^[a-zA-Z_$]+([\w_$]*)$/,o=/"/g;function a(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.reduce((function(e,t){return e?!t||t.startsWith("[")?""+e+t:e+"."+t:t}),"")}function i(e){return function(t){for(var n=[],i=arguments.length-1;i-- >0;)n[i]=arguments[i+1];return e.isString(t)?a.apply(void 0,n.concat([t])):e.isArray(t)?(n=a.apply(void 0,n),t.reduce((function(e,t){var n=typeof t;return"number"===n?t<0||t%1!=0?e+'["'+t+'"]':e+"["+t+"]":"string"!==n?e+'["'+t+'"]':t?r.test(t)?s.test(t)?e?e+"."+t:""+e+t:e+'["'+t.replace(o,'\\"')+'"]':e+"["+t+"]":e+'[""]'}),n)):void 0}}i.notChainable=!0,e.exports=i},function(e,t,n){"use strict";var r=n(33);e.exports=function(e){var t=r(e);return function(n,r,s){if(void 0===r&&(r=e.identity),void 0!==(s=e.merge({includeRoot:!e.isArray(n),pathFormat:"string",checkCircular:!1,leavesOnly:!1},s||{})).childrenPath){if(s.includeRoot||void 0!==s.rootIsChildren||(s.rootIsChildren=e.isArray(n)),!e.isString(s.childrenPath)&&!e.isArray(s.childrenPath))throw Error("childrenPath can be string or array");e.isString(s.childrenPath)&&(s.childrenPath=[s.childrenPath]),s.strChildrenPath=s.childrenPath,s.childrenPath=[];for(var o=s.strChildrenPath.length-1;o>=0;o--)s.childrenPath[o]=e.toPath(s.strChildrenPath[o])}return t({value:n,callback:r,options:s,obj:n}),n}}},function(e,t,n){var r=n(19),s=n(51),o=n(52),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?s(e):o(e)}},function(e,t,n){var r=n(20),s="object"==typeof self&&self&&self.Object===Object&&self,o=r||s||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(39);"string"==typeof r&&(r=[[e.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(16)(r,s);r.locals&&(e.exports=r.locals)},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var s=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[n].concat(o).concat([s]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},s=0;s<this.length;s++){var o=this[s][0];null!=o&&(r[o]=!0)}for(s=0;s<e.length;s++){var a=e[s];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,s,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=r.apply(this,arguments)),s}),i=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=i.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),l=null,u=0,f=[],p=n(40);function m(e,t){for(var n=0;n<e.length;n++){var r=e[n],s=o[r.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](r.parts[a]);for(;a<r.parts.length;a++)s.parts.push($(r.parts[a],t))}else{var i=[];for(a=0;a<r.parts.length;a++)i.push($(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:i}}}}function b(e,t){for(var n=[],r={},s=0;s<e.length;s++){var o=e[s],a=t.base?o[0]+t.base:o[0],i={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(i):n.push(r[a]={id:a,parts:[i]})}return n}function d(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=c(e.insertAt.before,n);n.insertBefore(t,s)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return g(t,e.attrs),d(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function $(e,t){var n,r,s,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;n=l||(l=y(t)),r=j.bind(null,n,a,!1),s=j.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),d(e,t),t}(t),r=w.bind(null,n,t),s=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=E.bind(null,n),s=function(){h(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else s()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=b(e,t);return m(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s];(i=o[a.id]).refs--,r.push(i)}e&&m(b(e,t),t);for(s=0;s<r.length;s++){var i;if(0===(i=r[s]).refs){for(var c=0;c<i.parts.length;c++)i.parts[c]();delete o[i.id]}}}};var v,x=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function j(e,t,n,r){var s=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,s);else{var o=document.createTextNode(s),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function E(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function w(e,t,n){var r=n.css,s=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&s;(t.convertToAbsoluteUrls||o)&&(r=p(r)),s&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var a=new Blob([r],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(a),i&&URL.revokeObjectURL(i)}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(11),s=n(7);e.exports=function(e){if(!s(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(12).Symbol;e.exports=r},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(50))},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(18),s=n(23);e.exports=function(e){return null!=e&&s(e.length)&&!r(e)}},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";const r=n(30),s=n(31),o=n(32);function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function c(e,t){return t.decode?s(e):e}function l(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const s="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map(t=>c(t,e)):null===n?n:c(n,e);r[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const s of e.split("&")){let[e,a]=o(t.decode?s.replace(/\+/g," "):s,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:c(a,t),n(c(e,t),a,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else r[e]=f(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}t.extract=u,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const s=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[i(t,e),"[",s,"]"].join("")]:[...n,[i(t,e),"[",i(s,e),"]=",i(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[i(t,e),"[]"].join("")]:[...n,[i(t,e),"[]=",i(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[i(t,e),"=",i(r,e)].join("")]:[[n,i(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,i(t,e)]:[...n,[i(t,e),"=",i(r,e)].join("")]}}(t),s={};for(const t of Object.keys(e))n(t)||(s[t]=e[t]);const o=Object.keys(s);return!1!==t.sort&&o.sort(t.sort),o.map(n=>{const s=e[n];return void 0===s?"":null===s?i(n,t):Array.isArray(s)?s.reduce(r(n),[]).join("&"):i(n,t)+"="+i(s,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=o(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(u(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:c(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=l(e.url).split("?")[0]||"",s=t.extract(e.url),o=t.parse(s,{sort:!1}),a=Object.assign(o,e.query);let c=t.stringify(a,n);c&&(c="?"+c);let u=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(u="#"+i(e.fragmentIdentifier,n)),`${r}${c}${u}`}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e){var t=r(e);return function(n,r){r&&void 0!==r.leafsOnly&&(r.leavesOnly=r.leafsOnly);var s={pathFormat:(r=e.merge({checkCircular:!1,includeCircularPath:!0,leavesOnly:!r||void 0===r.childrenPath,pathFormat:"string"},r||{})).pathFormat,checkCircular:r.checkCircular,includeRoot:r.includeRoot,childrenPath:r.childrenPath,rootIsChildren:r.rootIsChildren,leavesOnly:r.leavesOnly},o=[];return t(n,(function(e,t,n,s){s.isCircular&&!r.includeCircularPath||void 0!==s.path&&o.push(s.path)}),s),o}}},function(e,t,n){"use strict";var r=n(6),s=n(38);e.exports=function(e){var t=s(e),n=r(e);return function(r,s,o){var a=!(o=e.merge({invert:!1},o||{})).invert;return(o=e.merge({onMatch:{cloneDeep:!1,skipChildren:!1,keepIfEmpty:!a},onNotMatch:{cloneDeep:!1,skipChildren:!1,keepIfEmpty:a}},o)).leavesOnly=!1,o.childrenPath=void 0,o.includeRoot=void 0,o.pathFormat="array",o.onTrue=o.invert?o.onMatch:o.onNotMatch,o.onFalse=o.invert?o.onNotMatch:o.onMatch,n(r,(function(e,n,r,a){return!1!==t(a.path,s)?o.invert:!o.invert}),o)}}},function(e,t,n){var r=n(41),s=n(21),o=n(58),a=n(59),i=Object.prototype,c=i.hasOwnProperty,l=r((function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&o(t[0],t[1],l)&&(r=1);++n<r;)for(var u=t[n],f=a(u),p=-1,m=f.length;++p<m;){var b=f[p],d=e[b];(void 0===d||s(d,i[b])&&!c.call(e,b))&&(e[b]=u[b])}return e}));e.exports=l},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function a(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=s.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=s.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),i=0;i<o.length;i++){var c=o[i];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";var r=n(9),s=n(34);e.exports=function(e){var t=r(e),n=s(e),o=e.each||e.forArray;return function r(s){var a=s.value,i=s.callback,c=s.options,l=s.key,u=s.path,f=s.strPath,p=s.depth;void 0===p&&(p=0);var m=s.parent,b=s.parents;void 0===b&&(b=[]);var d=s.obj,h=s.childrenPath,y=s.strChildrenPath;if(!c.break){var g,$={value:a,key:l,path:"array"==c.pathFormat?u:f||t(u),parent:m},v=b.concat([$]),x=void 0,j=void 0;if(c.checkCircular){if(e.isObject(a)&&!e.isEmpty(a)){x=-1;for(var E=b.length;E--;)if(b[E].value===a){x=E;break}j=b[x]||null}else x=-1,j=null;g=-1!==x}var w=!e.isObject(a)||e.isEmpty(a)||g||void 0!==c.childrenPath&&!n(a,c.childrenPath),A=(p||c.includeRoot)&&(!c.leavesOnly||w);if(A){var O={path:$.path,parent:m,parents:b,obj:d,depth:p,isCircular:g,circularParent:j,circularParentIndex:x,isLeaf:w,break:function(){return c.break=!0,!1}};void 0!==c.childrenPath&&($.childrenPath="array"==c.pathFormat?h:y,O.childrenPath=$.childrenPath);try{var C=i(a,l,m&&m.value,O)}catch(e){throw e.message&&(e.message+="\ncallback failed before deep iterate at:\n"+O.path),e}}if(!c.break&&!1!==C&&!g&&e.isObject(a))if(void 0!==c.childrenPath){function k(n,s,o){n&&e.isObject(n)&&e.forOwn(n,(function(e,n){var a=(u||[]).concat(s||[],[n]),l="array"==c.pathFormat?t([n],f||"",o||""):void 0;r({value:e,callback:i,options:c,key:n,path:a,strPath:l,depth:p+1,parent:$,parents:v,obj:d,childrenPath:s,strChildrenPath:o})}))}!p&&c.rootIsChildren?e.isArray(a)?k(a):e.forOwn(a,(function(e,n){r({value:e,callback:i,options:c,key:n,path:[n],strPath:t([n]),depth:p+1,parent:$,parents:v,obj:d})})):o(c.childrenPath,(function(t,n){k(e.get(a,t),t,c.strChildrenPath[n])}))}else e.forOwn(a,(function(n,s){if(!e.isArray(a)||void 0!==n||s in a){var o=(u||[]).concat([s]),l="array"==c.pathFormat?t([s],f||""):void 0;r({value:n,callback:i,options:c,key:s,path:o,strPath:l,depth:p+1,parent:$,parents:v,obj:d})}}));if(c.callbackAfterIterate&&A){O.afterIterate=!0;try{i(a,l,m&&m.value,O)}catch(e){throw e.message&&(e.message+="\ncallback failed after deep iterate at:\n"+O.path),e}}}}}},function(e,t,n){"use strict";e.exports=function(e){return function(t,n){return e.some(n,(function(n){var r=e.get(t,n);return!e.isEmpty(r)}))}}},function(e,t,n){"use strict";var r=n(36),s=n(10);e.exports=function(e){var t=s(e),n=r(),o=e.each||e.forArray;return function(r,s){var a={checkCircular:(s=e.merge({checkCircular:!1},s||{})).checkCircular},i=[];return t(r,(function(t,n,r,s){!s.isCircular&&e.isArray(t)&&i.push(t)}),a),e.isArray(r)&&i.push(r),o(i,n),r}}},function(e,t,n){"use strict";e.exports=function(e){return function(e){for(var t=[],n=0;n<e.length;n++)n in e||t.push(n);for(var r=t.length;r--;)e.splice(t[r],1);return e}}},function(e,t,n){"use strict";function r(e){return function(t,n){var r=(n=e.isArray(n)?e.clone(n):e.toPath(n)).pop(),s=n.length?e.get(t,n):t;return void 0!==s&&r in s}}r.notChainable=!0,e.exports=r},function(e,t,n){"use strict";var r=n(9);function s(e){var t=r(e);return function(n,r){var s,o;e.isString(n)?s=n:o=n,r=e.isArray(r)?e.cloneDeep(r):[r];for(var a=0;a<r.length;a++)if(e.isString(r[a])&&(r[a]=e.toPath(r[a])),e.isArray(r[a])){if(void 0===o&&(o=e.toPath(s)),o.length>=r[a].length&&e.isEqual(e.takeRight(o,r[a].length),r[a]))return r[a]}else{if(!(r[a]instanceof RegExp))throw new Error("To match path use only string/regex or array of them.");if(void 0===s&&(s=t(n)),r[a].test(s))return r[a]}return!1}}s.notChainable=!0,e.exports=s},function(e,t,n){(e.exports=n(15)(!0)).push([e.i,"pre.gf-formatted-error,pre.gf-formatted-warning{background:transparent;border:none;padding-bottom:0;color:#ff6060}pre.gf-formatted-warning{color:#f79520}\n","",{version:3,sources:["common.css"],names:[],mappings:"AAAA,gDAAgD,sBAAsB,CAAC,WAAW,CAAC,gBAAgB,CAAC,aAAa,CAAC,yBAAyB,aAAa",file:"common.css",sourcesContent:["pre.gf-formatted-error,pre.gf-formatted-warning{background:transparent;border:none;padding-bottom:0;color:#ff6060}pre.gf-formatted-warning{color:#f79520}\n"]}])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var s,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(s=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}},function(e,t,n){var r=n(17),s=n(42),o=n(44);e.exports=function(e,t){return o(s(e,t,r),e+"")}},function(e,t,n){var r=n(43),s=Math.max;e.exports=function(e,t,n){return t=s(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,i=s(o.length-t,0),c=Array(i);++a<i;)c[a]=o[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=o[a];return l[t]=n(c),r(e,this,l)}}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(45),s=n(57)(r);e.exports=s},function(e,t,n){var r=n(46),s=n(47),o=n(17),a=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(48),s=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=s},function(e,t,n){var r=n(49),s=n(56);e.exports=function(e,t){var n=s(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(18),s=n(53),o=n(7),a=n(55),i=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,f=l.hasOwnProperty,p=RegExp("^"+u.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(r(e)?p:i).test(a(e))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(19),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,i=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(e){}var s=a.call(e);return r&&(t?e[i]=n:delete e[i]),s}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){var r,s=n(54),o=(r=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(12)["__core-js_shared__"];e.exports=r},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var s=n(),o=16-(s-r);if(r=s,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(21),s=n(22),o=n(24),a=n(7);e.exports=function(e,t,n){if(!a(n))return!1;var i=typeof t;return!!("number"==i?s(n)&&o(t,n.length):"string"==i&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(60),s=n(71),o=n(22);e.exports=function(e){return o(e)?r(e,!0):s(e)}},function(e,t,n){var r=n(61),s=n(62),o=n(64),a=n(65),i=n(24),c=n(67),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&s(e),f=!n&&!u&&a(e),p=!n&&!u&&!f&&c(e),m=n||u||f||p,b=m?r(e.length,String):[],d=b.length;for(var h in e)!t&&!l.call(e,h)||m&&("length"==h||f&&("offset"==h||"parent"==h)||p&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||i(h,d))||b.push(h);return b}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(63),s=n(13),o=Object.prototype,a=o.hasOwnProperty,i=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return s(e)&&a.call(e,"callee")&&!i.call(e,"callee")};e.exports=c},function(e,t,n){var r=n(11),s=n(13);e.exports=function(e){return s(e)&&"[object Arguments]"==r(e)}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){(function(e){var r=n(12),s=n(66),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||s;e.exports=c}).call(this,n(25)(e))},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(68),s=n(69),o=n(70),a=o&&o.isTypedArray,i=a?s(a):r;e.exports=i},function(e,t,n){var r=n(11),s=n(23),o=n(13),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!a[r(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){(function(e){var r=n(20),s=t&&!t.nodeType&&t,o=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===s&&r.process,i=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i}).call(this,n(25)(e))},function(e,t,n){var r=n(7),s=n(72),o=n(73),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=s(e),n=[];for(var i in e)("constructor"!=i||!t&&a.call(e,i))&&n.push(i);return n}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(75);"string"==typeof r&&(r=[[e.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(16)(r,s);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(15)(!0)).push([e.i,".min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:0.775rem}.gf-tabs-cognite.active:before,.gf-tabs-cognite.active:focus:before,.gf-tabs-cognite.active:hover:before{background-image:linear-gradient(90deg, #33b5e5 0, #00b3ff 99%, #1b1b1b)}input[type='checkbox']{margin:4px}.custom-query input{font-family:monospace}pre code{line-height:2}.cognite-timeseries-list-checkbox{margin-right:10px}.gf-dropdown-wrapper{min-width:200px}\n","",{version:3,sources:["query_editor.css"],names:[],mappings:"AAAA,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,6CAA6C,cAAc,CAAC,oEAAoE,cAAc,CAAC,yGAAyG,wEAAwE,CAAC,uBAAuB,UAAU,CAAC,oBAAoB,qBAAqB,CAAC,SAAS,aAAa,CAAC,kCAAkC,iBAAiB,CAAC,qBAAqB,eAAe",file:"query_editor.css",sourcesContent:[".min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:0.775rem}.gf-tabs-cognite.active:before,.gf-tabs-cognite.active:focus:before,.gf-tabs-cognite.active:hover:before{background-image:linear-gradient(90deg, #33b5e5 0, #00b3ff 99%, #1b1b1b)}input[type='checkbox']{margin:4px}.custom-query input{font-family:monospace}pre code{line-height:2}.cognite-timeseries-list-checkbox{margin-right:10px}.gf-dropdown-wrapper{min-width:200px}\n"]}])},function(e,t,n){"use strict";n.r(t);var r=n(3),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function i(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}c((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&o[0]?r.return:o[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;switch(r=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){s={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}var p,m=n(4),b=n(1),d=n.n(b);!function(e){e.Timeseries="Timeseries",e.Asset="Asset",e.Custom="Custom"}(p||(p={}));var h,y={target:"",aggregation:"average",granularity:"",label:"",tab:p.Timeseries,expr:"",assetQuery:{includeSubtrees:!1,target:""}};function g(e){return void 0!==e.error}!function(e){e.POST="POST",e.GET="GET",e.PATCH="PATCH",e.DELETE="DELETE"}(h||(h={}));var $,v=function(e){this.isOk=!0,this.isErr=!1,this.value=e},x=function(e){this.isOk=!1,this.isErr=!0,this.error=e},j=n(26),E=n(8),w=n.n(E),A="!~",O="=~",C="!=",k="=";function S(e,t){return void 0===t&&(t=1e3),w()(Math.max(e,t))}function _(e,t){return e.dashboardId+"_"+e.panelId+"_"+t.refId}!function(e){e.assets="assets",e.events="events"}($||($={}));var q=function(e,t){return t.length?e.filter((function(e){return t.every((function(t){return P(e,t)}))})):e},P=function(e,t){var n=t.path,r=t.filter,s=t.value,o=Object(b.get)(e,n,null),a=new RegExp("^"+s+"$");switch(r){case O:return a.test(o);case A:return!a.test(o);case C:return s!==o;default:return!1}},I=n(5);function T(e){return e[0]}var F=function(){return[]},N=function(e){return e.join("")},R=function(e){return{path:e[0],filter:e[1],value:e[2]}},U=function(e){var t=u(e,3),n=(t[0],t[1]);t[2];return{operator:n}},D=function(e){var t=u(e,4),n=t[0],r=(t[1],t[2]);t[3];return r&&r.length?{func:n||"",args:r}:{func:n}},L={Lexer:void 0,ParserRules:[{name:"unsigned_int$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_int$ebnf$1",symbols:["unsigned_int$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"unsigned_int",symbols:["unsigned_int$ebnf$1"],postprocess:function(e){return parseInt(e[0].join(""))}},{name:"int$ebnf$1$subexpression$1",symbols:[{literal:"-"}]},{name:"int$ebnf$1$subexpression$1",symbols:[{literal:"+"}]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:T},{name:"int$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"int$ebnf$2",symbols:[/[0-9]/]},{name:"int$ebnf$2",symbols:["int$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"int",symbols:["int$ebnf$1","int$ebnf$2"],postprocess:function(e){return e[0]?parseInt(e[0][0]+e[1].join("")):parseInt(e[1].join(""))}},{name:"unsigned_decimal$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$1",symbols:["unsigned_decimal$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:["unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"unsigned_decimal$ebnf$2$subexpression$1",symbols:[{literal:"."},"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1"]},{name:"unsigned_decimal$ebnf$2",symbols:["unsigned_decimal$ebnf$2$subexpression$1"],postprocess:T},{name:"unsigned_decimal$ebnf$2",symbols:[],postprocess:function(){return null}},{name:"unsigned_decimal",symbols:["unsigned_decimal$ebnf$1","unsigned_decimal$ebnf$2"],postprocess:function(e){return parseFloat(e[0].join("")+(e[1]?"."+e[1][1].join(""):""))}},{name:"decimal$ebnf$1",symbols:[{literal:"-"}],postprocess:T},{name:"decimal$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"decimal$ebnf$2",symbols:[/[0-9]/]},{name:"decimal$ebnf$2",symbols:["decimal$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decimal$ebnf$3$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"decimal$ebnf$3$subexpression$1$ebnf$1",symbols:["decimal$ebnf$3$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decimal$ebnf$3$subexpression$1",symbols:[{literal:"."},"decimal$ebnf$3$subexpression$1$ebnf$1"]},{name:"decimal$ebnf$3",symbols:["decimal$ebnf$3$subexpression$1"],postprocess:T},{name:"decimal$ebnf$3",symbols:[],postprocess:function(){return null}},{name:"decimal",symbols:["decimal$ebnf$1","decimal$ebnf$2","decimal$ebnf$3"],postprocess:function(e){return parseFloat((e[0]||"")+e[1].join("")+(e[2]?"."+e[2][1].join(""):""))}},{name:"percentage",symbols:["decimal",{literal:"%"}],postprocess:function(e){return e[0]/100}},{name:"jsonfloat$ebnf$1",symbols:[{literal:"-"}],postprocess:T},{name:"jsonfloat$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"jsonfloat$ebnf$2",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$2",symbols:["jsonfloat$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"jsonfloat$ebnf$3$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$3$subexpression$1$ebnf$1",symbols:["jsonfloat$ebnf$3$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"jsonfloat$ebnf$3$subexpression$1",symbols:[{literal:"."},"jsonfloat$ebnf$3$subexpression$1$ebnf$1"]},{name:"jsonfloat$ebnf$3",symbols:["jsonfloat$ebnf$3$subexpression$1"],postprocess:T},{name:"jsonfloat$ebnf$3",symbols:[],postprocess:function(){return null}},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$1",symbols:[/[+-]/],postprocess:T},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$2",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$2",symbols:["jsonfloat$ebnf$4$subexpression$1$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"jsonfloat$ebnf$4$subexpression$1",symbols:[/[eE]/,"jsonfloat$ebnf$4$subexpression$1$ebnf$1","jsonfloat$ebnf$4$subexpression$1$ebnf$2"]},{name:"jsonfloat$ebnf$4",symbols:["jsonfloat$ebnf$4$subexpression$1"],postprocess:T},{name:"jsonfloat$ebnf$4",symbols:[],postprocess:function(){return null}},{name:"jsonfloat",symbols:["jsonfloat$ebnf$1","jsonfloat$ebnf$2","jsonfloat$ebnf$3","jsonfloat$ebnf$4"],postprocess:function(e){return parseFloat((e[0]||"")+e[1].join("")+(e[2]?"."+e[2][1].join(""):"")+(e[3]?"e"+(e[3][1]||"+")+e[3][2].join(""):""))}},{name:"regexp$string$1",symbols:[{literal:"="},{literal:"~"}],postprocess:function(e){return e.join("")}},{name:"regexp",symbols:["regexp$string$1"],postprocess:T},{name:"regexp$string$2",symbols:[{literal:"!"},{literal:"~"}],postprocess:function(e){return e.join("")}},{name:"regexp",symbols:["regexp$string$2"],postprocess:T},{name:"equals",symbols:[{literal:"="}],postprocess:T},{name:"not_equals$string$1",symbols:[{literal:"!"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"not_equals",symbols:["not_equals$string$1"],postprocess:T},{name:"prop_name$ebnf$1",symbols:[/[A-Za-z0-9_]/]},{name:"prop_name$ebnf$1",symbols:["prop_name$ebnf$1",/[A-Za-z0-9_]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"prop_name",symbols:["prop_name$ebnf$1"],postprocess:function(e){var t=u(e,1)[0];return N(t)}},{name:"number",symbols:["decimal"],postprocess:T},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(e){return e[1].join("")}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(e){return e[1].join("")}},{name:"dqregexp$ebnf$1",symbols:[]},{name:"dqregexp$ebnf$1",symbols:["dqregexp$ebnf$1","ndstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"dqregexp",symbols:[{literal:'"'},"dqregexp$ebnf$1",{literal:'"'}],postprocess:function(e){return e[1].join("")}},{name:"sqregexp$ebnf$1",symbols:[]},{name:"sqregexp$ebnf$1",symbols:["sqregexp$ebnf$1","nsstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"sqregexp",symbols:[{literal:"'"},"sqregexp$ebnf$1",{literal:"'"}],postprocess:function(e){return e[1].join("")}},{name:"dstrchar",symbols:[/[^\\"\n]/],postprocess:T},{name:"dstrchar",symbols:["backslash","strescape"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(e){return e.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(e){return'"'}},{name:"sstrchar",symbols:[/[^\\'\n]/],postprocess:T},{name:"sstrchar",symbols:["backslash","strescape"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(e){return e.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(e){return"'"}},{name:"ndstrchar",symbols:[/[^\\"\n]/],postprocess:T},{name:"ndstrchar",symbols:["backslash","unicode"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"ndstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(e){return e.join("")}},{name:"ndstrchar",symbols:["ndstrchar$string$1"],postprocess:function(e){return'\\"'}},{name:"ndstrchar",symbols:["backslash"],postprocess:T},{name:"nsstrchar",symbols:[/[^\\'\n]/],postprocess:T},{name:"nsstrchar",symbols:["backslash","unicode"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"nsstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(e){return e.join("")}},{name:"nsstrchar",symbols:["nsstrchar$string$1"],postprocess:function(e){return"\\'"}},{name:"nsstrchar",symbols:["backslash"],postprocess:T},{name:"strescape",symbols:[/["\\/bfnrt]/],postprocess:T},{name:"strescape",symbols:["unicode"],postprocess:T},{name:"backslash",symbols:[{literal:"\\"}],postprocess:function(e){return"\\"}},{name:"unicode",symbols:[{literal:"u"},/[a-fA-F0-9]/,/[a-fA-F0-9]/,/[a-fA-F0-9]/,/[a-fA-F0-9]/],postprocess:function(e){return e.join("")}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:null},{name:"value",symbols:["object"],postprocess:T},{name:"value",symbols:["array"],postprocess:T},{name:"value",symbols:["primitive"],postprocess:T},{name:"primitive",symbols:["number"],postprocess:T},{name:"primitive",symbols:["string"],postprocess:T},{name:"primitive$string$1",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"primitive",symbols:["primitive$string$1"],postprocess:function(){return!0}},{name:"primitive$string$2",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"primitive",symbols:["primitive$string$2"],postprocess:function(){return!1}},{name:"primitive$string$3",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(e){return e.join("")}},{name:"primitive",symbols:["primitive$string$3"],postprocess:function(){return null}},{name:"query",symbols:["_","trimmed","_"],postprocess:function(e){return e[1]}},{name:"trimmed",symbols:["compositeElement"],postprocess:T},{name:"trimmed",symbols:["function"],postprocess:T},{name:"function",symbols:["unary","br","arithmeticElements","BR"],postprocess:D},{name:"function",symbols:["unary","br","oneElement","BR"],postprocess:D},{name:"function",symbols:["binary","br","twoElements","BR"],postprocess:D},{name:"function",symbols:["n_ary","br","commaSeparatedElements","BR"],postprocess:D},{name:"function$string$1",symbols:[{literal:"m"},{literal:"a"},{literal:"p"}],postprocess:function(e){return e.join("")}},{name:"function",symbols:["function$string$1","br","map_func_args","BR"],postprocess:D},{name:"oneElement",symbols:["arithmeticElement"],postprocess:function(e){var t=u(e,1)[0];return Array.isArray(t)?t:[t]}},{name:"twoElements",symbols:["compositeElement","comma","compositeElement"],postprocess:function(e){return[e[0],e[2]]}},{name:"commaSeparatedElements$ebnf$1",symbols:[]},{name:"commaSeparatedElements$ebnf$1$subexpression$1",symbols:["comma","compositeElement"]},{name:"commaSeparatedElements$ebnf$1",symbols:["commaSeparatedElements$ebnf$1","commaSeparatedElements$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"commaSeparatedElements",symbols:["compositeElement","commaSeparatedElements$ebnf$1"],postprocess:function(e){var t=[e[0]];for(var n in e[1])t.push(e[1][n][1]);return t}},{name:"arithmeticElements$ebnf$1$subexpression$1",symbols:["operator","arithmeticElement"]},{name:"arithmeticElements$ebnf$1",symbols:["arithmeticElements$ebnf$1$subexpression$1"]},{name:"arithmeticElements$ebnf$1$subexpression$2",symbols:["operator","arithmeticElement"]},{name:"arithmeticElements$ebnf$1",symbols:["arithmeticElements$ebnf$1","arithmeticElements$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"arithmeticElements",symbols:["arithmeticElement","arithmeticElements$ebnf$1"],postprocess:function(e){var t=Array.isArray(e[0])?f(e[0]):[e[0]];for(var n in e[1]){var r=[].concat.apply([],f(e[1][n]));t.push.apply(t,f(r))}return t}},{name:"map_func_args",symbols:["compositeElement",{literal:","},"array",{literal:","},"array","comma","number"],postprocess:function(e){return e.filter((function(e){return","!==e}))}},{name:"compositeElement",symbols:["arithmeticElement"],postprocess:T},{name:"compositeElement",symbols:["arithmeticElements"],postprocess:T},{name:"arithmeticElement$ebnf$1$subexpression$1",symbols:["unary_operator"]},{name:"arithmeticElement$ebnf$1",symbols:["arithmeticElement$ebnf$1$subexpression$1"],postprocess:T},{name:"arithmeticElement$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"arithmeticElement",symbols:["arithmeticElement$ebnf$1","element"],postprocess:function(e){var t=u(e,2),n=t[0],r=t[1];return n?[n[0],r]:r}},{name:"element",symbols:["function"],postprocess:T},{name:"element",symbols:["type","condition"],postprocess:function(e){var t=u(e,2);return{type:t[0],query:t[1]}}},{name:"element",symbols:["number"],postprocess:function(e){return{constant:u(e,1)[0]}}},{name:"element$string$1",symbols:[{literal:"p"},{literal:"i"},{literal:"("}],postprocess:function(e){return e.join("")}},{name:"element",symbols:["element$string$1","_",{literal:")"}],postprocess:function(e){return{constant:e[0]+e[2]}}},{name:"type$string$1",symbols:[{literal:"t"},{literal:"s"}],postprocess:function(e){return e.join("")}},{name:"type",symbols:["type$string$1"],postprocess:T},{name:"type$string$2",symbols:[{literal:"T"},{literal:"S"}],postprocess:function(e){return e.join("")}},{name:"type",symbols:["type$string$2"],postprocess:function(e){return u(e,1)[0].toLowerCase()}},{name:"condition",symbols:["curl","CURL"],postprocess:F},{name:"condition$ebnf$1",symbols:[]},{name:"condition$ebnf$1$subexpression$1",symbols:["comma","pair"]},{name:"condition$ebnf$1",symbols:["condition$ebnf$1","condition$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"condition",symbols:["curl","pair","condition$ebnf$1","CURL"],postprocess:function(e){if(!e.length)return[];var t=[R(e[1])];for(var n in e[2])t.push(R(e[2][n][1]));return t}},{name:"string",symbols:["sqstring"],postprocess:T},{name:"string",symbols:["dqstring"],postprocess:T},{name:"string",symbols:["variable"],postprocess:T},{name:"regexp_string",symbols:["sqregexp"],postprocess:T},{name:"regexp_string",symbols:["dqregexp"],postprocess:T},{name:"regexp_string",symbols:["variable"],postprocess:T},{name:"array",symbols:["sqr","SQR"],postprocess:F},{name:"array$ebnf$1",symbols:[]},{name:"array$ebnf$1$subexpression$1",symbols:["comma","value"]},{name:"array$ebnf$1",symbols:["array$ebnf$1","array$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"array",symbols:["sqr","value","array$ebnf$1","SQR"],postprocess:function(e){var t=[e[1]];for(var n in e[2])t.push(e[2][n][1]);return t}},{name:"object",symbols:["curl","CURL"],postprocess:function(){return{}}},{name:"object$ebnf$1",symbols:[]},{name:"object$ebnf$1$subexpression$1",symbols:["comma","pair"]},{name:"object$ebnf$1",symbols:["object$ebnf$1","object$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"object",symbols:["curl","pair","object$ebnf$1","CURL"],postprocess:function(e){var t=[R(e[1])];for(var n in e[2])t.push(R(e[2][n][1]));return t}},{name:"pair",symbols:["prop_name","_","equals","_","value"],postprocess:function(e){return[e[0],e[2],e[4]]}},{name:"pair",symbols:["prop_name","_","not_equals","_","primitive"],postprocess:function(e){return[e[0],e[2],e[4]]}},{name:"pair",symbols:["prop_name","_","regexp","_","regexp_string"],postprocess:function(e){return[e[0],e[2],e[4]]}},{name:"variable",symbols:[{literal:"$"},"prop_name"],postprocess:N},{name:"variable$string$1",symbols:[{literal:"["},{literal:"["}],postprocess:function(e){return e.join("")}},{name:"variable$string$2",symbols:[{literal:"]"},{literal:"]"}],postprocess:function(e){return e.join("")}},{name:"variable",symbols:["variable$string$1","prop_name","variable$string$2"],postprocess:N},{name:"variable",symbols:[{literal:"$"},"advanced_variable"],postprocess:N},{name:"advanced_variable",symbols:[{literal:"{"},"prop_name",{literal:":"},"prop_name",{literal:"}"}],postprocess:N},{name:"unary_operator",symbols:["_",{literal:"-"},"_"],postprocess:U},{name:"operator",symbols:["_",{literal:"+"},"_"],postprocess:U},{name:"operator",symbols:["_",{literal:"-"},"_"],postprocess:U},{name:"operator",symbols:["_",{literal:"/"},"_"],postprocess:U},{name:"operator",symbols:["_",{literal:"*"},"_"],postprocess:U},{name:"comma",symbols:["_",{literal:","},"_"],postprocess:function(e){return e[1]}},{name:"unary$string$1",symbols:[{literal:"s"},{literal:"i"},{literal:"n"}],postprocess:function(e){return e.join("")}},{name:"unary",symbols:["unary$string$1"],postprocess:T},{name:"unary$string$2",symbols:[{literal:"c"},{literal:"o"},{literal:"s"}],postprocess:function(e){return e.join("")}},{name:"unary",symbols:["unary$string$2"],postprocess:T},{name:"unary$string$3",symbols:[{literal:"l"},{literal:"n"}],postprocess:function(e){return e.join("")}},{name:"unary",symbols:["unary$string$3"],postprocess:T},{name:"unary$string$4",symbols:[{literal:"s"},{literal:"q"},{literal:"r"},{literal:"t"}],postprocess:function(e){return e.join("")}},{name:"unary",symbols:["unary$string$4"],postprocess:T},{name:"unary$string$5",symbols:[{literal:"e"},{literal:"x"},{literal:"p"}],postprocess:function(e){return e.join("")}},{name:"unary",symbols:["unary$string$5"],postprocess:T},{name:"unary$string$6",symbols:[{literal:"a"},{literal:"b"},{literal:"s"}],postprocess:function(e){return e.join("")}},{name:"unary",symbols:["unary$string$6"],postprocess:T},{name:"unary",symbols:[],postprocess:T},{name:"binary$string$1",symbols:[{literal:"p"},{literal:"o"},{literal:"w"}],postprocess:function(e){return e.join("")}},{name:"binary",symbols:["binary$string$1"],postprocess:T},{name:"binary$string$2",symbols:[{literal:"r"},{literal:"o"},{literal:"u"},{literal:"n"},{literal:"d"}],postprocess:function(e){return e.join("")}},{name:"binary",symbols:["binary$string$2"],postprocess:T},{name:"binary$string$3",symbols:[{literal:"o"},{literal:"n"},{literal:"_"},{literal:"e"},{literal:"r"},{literal:"r"},{literal:"o"},{literal:"r"}],postprocess:function(e){return e.join("")}},{name:"binary",symbols:["binary$string$3"],postprocess:T},{name:"n_ary$string$1",symbols:[{literal:"m"},{literal:"a"},{literal:"x"}],postprocess:function(e){return e.join("")}},{name:"n_ary",symbols:["n_ary$string$1"],postprocess:T},{name:"n_ary$string$2",symbols:[{literal:"m"},{literal:"i"},{literal:"n"}],postprocess:function(e){return e.join("")}},{name:"n_ary",symbols:["n_ary$string$2"],postprocess:T},{name:"n_ary$string$3",symbols:[{literal:"a"},{literal:"v"},{literal:"g"}],postprocess:function(e){return e.join("")}},{name:"n_ary",symbols:["n_ary$string$3"],postprocess:T},{name:"n_ary$string$4",symbols:[{literal:"s"},{literal:"u"},{literal:"m"}],postprocess:function(e){return e.join("")}},{name:"n_ary",symbols:["n_ary$string$4"],postprocess:T},{name:"br",symbols:["_",{literal:"("}],postprocess:null},{name:"BR",symbols:["_",{literal:")"}],postprocess:null},{name:"curl",symbols:["_",{literal:"{"}],postprocess:null},{name:"CURL",symbols:["_",{literal:"}"}],postprocess:null},{name:"sqr",symbols:["_",{literal:"["}],postprocess:null},{name:"SQR",symbols:["_",{literal:"]"}],postprocess:null}],ParserStart:"query"},B=n(6),Q=n.n(B),M=n(27),J=n.n(M),G=n(28),V=n.n(G);function W(e){return e[0]}var H=function(){return[]},K=function(e){var t,n;return e.length>2?((t={})[e[0]+e[1]]={key:e[0],filter:e[1],value:e[2]},t):((n={})[e[0]]=e[1],n)},Y={Lexer:void 0,ParserRules:[{name:"unsigned_int$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_int$ebnf$1",symbols:["unsigned_int$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"unsigned_int",symbols:["unsigned_int$ebnf$1"],postprocess:function(e){return parseInt(e[0].join(""))}},{name:"int$ebnf$1$subexpression$1",symbols:[{literal:"-"}]},{name:"int$ebnf$1$subexpression$1",symbols:[{literal:"+"}]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:W},{name:"int$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"int$ebnf$2",symbols:[/[0-9]/]},{name:"int$ebnf$2",symbols:["int$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"int",symbols:["int$ebnf$1","int$ebnf$2"],postprocess:function(e){return e[0]?parseInt(e[0][0]+e[1].join("")):parseInt(e[1].join(""))}},{name:"unsigned_decimal$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$1",symbols:["unsigned_decimal$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",symbols:["unsigned_decimal$ebnf$2$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"unsigned_decimal$ebnf$2$subexpression$1",symbols:[{literal:"."},"unsigned_decimal$ebnf$2$subexpression$1$ebnf$1"]},{name:"unsigned_decimal$ebnf$2",symbols:["unsigned_decimal$ebnf$2$subexpression$1"],postprocess:W},{name:"unsigned_decimal$ebnf$2",symbols:[],postprocess:function(){return null}},{name:"unsigned_decimal",symbols:["unsigned_decimal$ebnf$1","unsigned_decimal$ebnf$2"],postprocess:function(e){return parseFloat(e[0].join("")+(e[1]?"."+e[1][1].join(""):""))}},{name:"decimal$ebnf$1",symbols:[{literal:"-"}],postprocess:W},{name:"decimal$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"decimal$ebnf$2",symbols:[/[0-9]/]},{name:"decimal$ebnf$2",symbols:["decimal$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decimal$ebnf$3$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"decimal$ebnf$3$subexpression$1$ebnf$1",symbols:["decimal$ebnf$3$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"decimal$ebnf$3$subexpression$1",symbols:[{literal:"."},"decimal$ebnf$3$subexpression$1$ebnf$1"]},{name:"decimal$ebnf$3",symbols:["decimal$ebnf$3$subexpression$1"],postprocess:W},{name:"decimal$ebnf$3",symbols:[],postprocess:function(){return null}},{name:"decimal",symbols:["decimal$ebnf$1","decimal$ebnf$2","decimal$ebnf$3"],postprocess:function(e){return parseFloat((e[0]||"")+e[1].join("")+(e[2]?"."+e[2][1].join(""):""))}},{name:"percentage",symbols:["decimal",{literal:"%"}],postprocess:function(e){return e[0]/100}},{name:"jsonfloat$ebnf$1",symbols:[{literal:"-"}],postprocess:W},{name:"jsonfloat$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"jsonfloat$ebnf$2",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$2",symbols:["jsonfloat$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"jsonfloat$ebnf$3$subexpression$1$ebnf$1",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$3$subexpression$1$ebnf$1",symbols:["jsonfloat$ebnf$3$subexpression$1$ebnf$1",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"jsonfloat$ebnf$3$subexpression$1",symbols:[{literal:"."},"jsonfloat$ebnf$3$subexpression$1$ebnf$1"]},{name:"jsonfloat$ebnf$3",symbols:["jsonfloat$ebnf$3$subexpression$1"],postprocess:W},{name:"jsonfloat$ebnf$3",symbols:[],postprocess:function(){return null}},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$1",symbols:[/[+-]/],postprocess:W},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$1",symbols:[],postprocess:function(){return null}},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$2",symbols:[/[0-9]/]},{name:"jsonfloat$ebnf$4$subexpression$1$ebnf$2",symbols:["jsonfloat$ebnf$4$subexpression$1$ebnf$2",/[0-9]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"jsonfloat$ebnf$4$subexpression$1",symbols:[/[eE]/,"jsonfloat$ebnf$4$subexpression$1$ebnf$1","jsonfloat$ebnf$4$subexpression$1$ebnf$2"]},{name:"jsonfloat$ebnf$4",symbols:["jsonfloat$ebnf$4$subexpression$1"],postprocess:W},{name:"jsonfloat$ebnf$4",symbols:[],postprocess:function(){return null}},{name:"jsonfloat",symbols:["jsonfloat$ebnf$1","jsonfloat$ebnf$2","jsonfloat$ebnf$3","jsonfloat$ebnf$4"],postprocess:function(e){return parseFloat((e[0]||"")+e[1].join("")+(e[2]?"."+e[2][1].join(""):"")+(e[3]?"e"+(e[3][1]||"+")+e[3][2].join(""):""))}},{name:"regexp$string$1",symbols:[{literal:"="},{literal:"~"}],postprocess:function(e){return e.join("")}},{name:"regexp",symbols:["regexp$string$1"],postprocess:W},{name:"regexp$string$2",symbols:[{literal:"!"},{literal:"~"}],postprocess:function(e){return e.join("")}},{name:"regexp",symbols:["regexp$string$2"],postprocess:W},{name:"equals",symbols:[{literal:"="}],postprocess:W},{name:"not_equals$string$1",symbols:[{literal:"!"},{literal:"="}],postprocess:function(e){return e.join("")}},{name:"not_equals",symbols:["not_equals$string$1"],postprocess:W},{name:"prop_name$ebnf$1",symbols:[/[A-Za-z0-9_]/]},{name:"prop_name$ebnf$1",symbols:["prop_name$ebnf$1",/[A-Za-z0-9_]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"prop_name",symbols:["prop_name$ebnf$1"],postprocess:function(e){return u(e,1)[0].join("")}},{name:"number",symbols:["decimal"],postprocess:W},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(e){return e[1].join("")}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(e){return e[1].join("")}},{name:"dqregexp$ebnf$1",symbols:[]},{name:"dqregexp$ebnf$1",symbols:["dqregexp$ebnf$1","ndstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"dqregexp",symbols:[{literal:'"'},"dqregexp$ebnf$1",{literal:'"'}],postprocess:function(e){return e[1].join("")}},{name:"sqregexp$ebnf$1",symbols:[]},{name:"sqregexp$ebnf$1",symbols:["sqregexp$ebnf$1","nsstrchar"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"sqregexp",symbols:[{literal:"'"},"sqregexp$ebnf$1",{literal:"'"}],postprocess:function(e){return e[1].join("")}},{name:"dstrchar",symbols:[/[^\\"\n]/],postprocess:W},{name:"dstrchar",symbols:["backslash","strescape"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(e){return e.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(e){return'"'}},{name:"sstrchar",symbols:[/[^\\'\n]/],postprocess:W},{name:"sstrchar",symbols:["backslash","strescape"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(e){return e.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(e){return"'"}},{name:"ndstrchar",symbols:[/[^\\"\n]/],postprocess:W},{name:"ndstrchar",symbols:["backslash","unicode"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"ndstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(e){return e.join("")}},{name:"ndstrchar",symbols:["ndstrchar$string$1"],postprocess:function(e){return'\\"'}},{name:"ndstrchar",symbols:["backslash"],postprocess:W},{name:"nsstrchar",symbols:[/[^\\'\n]/],postprocess:W},{name:"nsstrchar",symbols:["backslash","unicode"],postprocess:function(e){return JSON.parse('"'+e.join("")+'"')}},{name:"nsstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(e){return e.join("")}},{name:"nsstrchar",symbols:["nsstrchar$string$1"],postprocess:function(e){return"\\'"}},{name:"nsstrchar",symbols:["backslash"],postprocess:W},{name:"strescape",symbols:[/["\\/bfnrt]/],postprocess:W},{name:"strescape",symbols:["unicode"],postprocess:W},{name:"backslash",symbols:[{literal:"\\"}],postprocess:function(e){return"\\"}},{name:"unicode",symbols:[{literal:"u"},/[a-fA-F0-9]/,/[a-fA-F0-9]/,/[a-fA-F0-9]/,/[a-fA-F0-9]/],postprocess:function(e){return e.join("")}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[\s]/],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:null},{name:"value",symbols:["object"],postprocess:W},{name:"value",symbols:["array"],postprocess:W},{name:"value",symbols:["primitive"],postprocess:W},{name:"primitive",symbols:["number"],postprocess:W},{name:"primitive",symbols:["string"],postprocess:W},{name:"primitive$string$1",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"primitive",symbols:["primitive$string$1"],postprocess:function(){return!0}},{name:"primitive$string$2",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(e){return e.join("")}},{name:"primitive",symbols:["primitive$string$2"],postprocess:function(){return!1}},{name:"primitive$string$3",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(e){return e.join("")}},{name:"primitive",symbols:["primitive$string$3"],postprocess:function(){return null}},{name:"rule",symbols:["type","condition"],postprocess:function(e){var t=u(e,2);return{type:t[0],query:t[1]}}},{name:"type$string$1",symbols:[{literal:"a"},{literal:"s"},{literal:"s"},{literal:"e"},{literal:"t"},{literal:"s"}],postprocess:function(e){return e.join("")}},{name:"type",symbols:["type$string$1"],postprocess:W},{name:"type$string$2",symbols:[{literal:"e"},{literal:"v"},{literal:"e"},{literal:"n"},{literal:"t"},{literal:"s"}],postprocess:function(e){return e.join("")}},{name:"type",symbols:["type$string$2"],postprocess:W},{name:"condition",symbols:[{literal:"{"},{literal:"}"}],postprocess:H},{name:"condition$ebnf$1",symbols:[]},{name:"condition$ebnf$1$subexpression$1",symbols:[{literal:","},"_","pair","_"]},{name:"condition$ebnf$1",symbols:["condition$ebnf$1","condition$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"condition",symbols:[{literal:"{"},"_","pair","_","condition$ebnf$1","_",{literal:"}"}],postprocess:function(e){if(!e.length)return[];var t=[K(e[2])];for(var n in e[4])t.push(K(e[4][n][2]));return t}},{name:"regexp_string",symbols:["sqregexp"],postprocess:W},{name:"regexp_string",symbols:["dqregexp"],postprocess:W},{name:"string",symbols:["sqstring"],postprocess:W},{name:"string",symbols:["dqstring"],postprocess:W},{name:"array",symbols:[{literal:"["},"_",{literal:"]"}],postprocess:H},{name:"array$ebnf$1",symbols:[]},{name:"array$ebnf$1$subexpression$1",symbols:[{literal:","},"_","value","_"]},{name:"array$ebnf$1",symbols:["array$ebnf$1","array$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"array",symbols:[{literal:"["},"_","value","_","array$ebnf$1","_",{literal:"]"}],postprocess:function(e){var t=[e[2]];for(var n in e[4])t.push(e[4][n][2]);return t}},{name:"object",symbols:[{literal:"{"},"_",{literal:"}"}],postprocess:function(){return{}}},{name:"object$ebnf$1",symbols:[]},{name:"object$ebnf$1$subexpression$1",symbols:[{literal:","},"_","pair","_"]},{name:"object$ebnf$1",symbols:["object$ebnf$1","object$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"object",symbols:[{literal:"{"},"_","pair","_","object$ebnf$1","_",{literal:"}"}],postprocess:function(e){var t=a({},K(e[2]));for(var n in e[4])t=a(a({},t),K(e[4][n][2]));return t}},{name:"pair",symbols:["prop_name","_","equals","_","value"],postprocess:function(e){return[e[0],e[4]]}},{name:"pair",symbols:["prop_name","_","regexp","_","regexp_string"],postprocess:function(e){return[e[0],e[2],e[4]]}},{name:"pair",symbols:["prop_name","_","not_equals","_","primitive"],postprocess:function(e){return[e[0],e[2],e[4]]}}],ParserStart:"rule"},z=I.Grammar.fromCompiled(Y),Z=Q()(d.a),X=J()(d.a),ee=V()(d.a),te=function(e,t){var n,r=t.trim();try{e.feed(r),n=u(e.finish(),1)[0]}catch(e){var s=ne(e,r);throw new Error(s)}if(!n){s=ne({offset:r.length},r,"Parser: Unexpected end of input");throw new Error(s)}return n},ne=function(e,t,n){var r=e.offset;void 0===n&&(n="Parser: Syntax error");var s=Number.isInteger(r)?r+1:t.length;return n+":\n"+(t+"\n"+Array(s).join(" ")+"^")},re=function(e){return function(e){var t=e.type,n=e.query,r=Z(n,(function(e,t,n){var r=n.value,s=n.filter;return!Object(b.isUndefined)(r)&&s})),s=r?r.reduce((function(e,t){return a(a({},e),t)}),{}):{},o=ee(s,["filter","value","key"]),i=X(o,{pathFormat:"array"}).map((function(e){var t=e.join("."),n=e.slice(0,-1),r=Object(b.get)(s,t),o=r.filter,a=r.key,i=r.value;return n.push(a),{filter:o,value:i,path:n.join(".")}})),c=Z(n,(function(e,t,n){var r=n.value,s=n.filter;return!(!Object(b.isUndefined)(r)&&s)}));return{type:t,params:c?c.reduce((function(e,t){return a(a({},e),t)}),{}):{},filters:i}}(function(e){return te(new I.Parser(z),e)}(e))},se=Q()(d.a),oe=I.Grammar.fromCompiled(L),ae=function(e,t,n,r){return i(void 0,void 0,Promise,(function(){var s,o,a,l,u,f,p,m,b,d,h;return c(this,(function(y){switch(y.label){case 0:return s=ue(e),o=t.aggregation,a=t.granularity,l=ce(s,{granularity:a,aggregate:o},r),(u=ye(l)).length?[4,Promise.all(u.map((function(t){return i(void 0,void 0,void 0,(function(){var r;return c(this,(function(s){switch(s.label){case 0:return[4,ft({filter:t},n,!1)];case 1:if(!(r=s.sent()).length)throw ie(e,t);return[2,r]}}))}))})))]:[2,[{expression:ve(l)}]];case 1:if(f=y.sent(),p=ge(l),m=f.map((function(e,t){return q(e,p[t])})),b=de(l),d=fe(m,b),!(h=d.map((function(e){return le(l,e)}))).length)throw ie(e);return[2,h.map((function(e){return{expression:e}}))]}}))}))},ie=function(e,t){var n=t?" "+JSON.stringify(t):"s";return new Error("No timeseries found for filter"+n+" in expression "+e)},ce=function(e,t,n){var r=t.aggregate,s=t.granularity;if("none"===r)return e;var o=Object(b.cloneDeep)(e),a={aggregate:r,granularity:s||n};return be(o,(function(e){Le(e)&&Object.keys(a).forEach((function(t){-1===Object(b.findIndex)(e.query,["path",t])&&e.query.push(Oe(t,a[t]))}))})),o},le=function(e,t){var n=0,r=ve(e,(function(e){if(Le(e)&&!ke(e)){var r=e.query.filter(qe);return t[n++].map((function(e){return e.id})).map((function(e){return Ae(f([Oe("id",e)],r))})).map((function(e){return ve(e)})).join(", ")}}));return xe(r)},ue=function(e){return te(new I.Parser(oe),e)},fe=function(e,t){var n,r,s,o;void 0===t&&(t=[]);for(var a=[],i=0;i<e.length;i++){var c=t.includes(i),u=f(e[i]);if(a.length){var p=f(a),m=[];try{for(var b=(n=void 0,l(p)),d=b.next();!d.done;d=b.next()){var h=d.value;if(c)m.push(f(h,[u]));else try{for(var y=(s=void 0,l(u)),g=y.next();!g.done;g=y.next()){var $=g.value;m.push(f(h,[[$]]))}}catch(e){s={error:e}}finally{try{g&&!g.done&&(o=y.return)&&o.call(y)}finally{if(s)throw s.error}}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=b.return)&&r.call(b)}finally{if(n)throw n.error}}a=f(m)}else a=c?[[u]]:u.map((function(e){return[[e]]}))}return a},pe=function(e,t,n){return i(void 0,void 0,void 0,(function(){var r,s,o;return c(this,(function(a){switch(a.label){case 0:return r=Ee(e),[4,ft({items:Object(b.uniqBy)(r,je)},n,!1)];case 1:return s=a.sent(),o=we(s),[2,e.map((function(e){return function(e,t,n){return ve(ue(e),(function(e){if(Le(e)){var r=u(Ce(e),1)[0].value,s=n[String(r)];return t?lt(t,s):""+(s.name||s.externalId||s.id)}}))}(e,t,o)}))]}}))}))},me=function(e){var t=[];return be(e,(function(e){if(Le(e)){var n=Ce(e);t=f(t,n)}})),t.map((function(e){var t,n=e.path,r=e.value;return(t={})[n]=r,t}))},be=function e(t,n){Object(b.isArray)(t)?t.forEach((function(t){return e(t,n)})):(n(t),Qe(t)&&e(Je(t)?t.args[0]:t.args,n))},de=function(e){var t=[],n=[],r=0;return be(e,(function(e){Ve(e)&&1===e.args.length?n.push.apply(n,f(e.args)):Le(e)&&!ke(e)&&(n.includes(e)&&t.push(r),r++)})),t},he=function(e,t){var n=[];return be(e,(function(e){Le(e)&&!ke(e)&&n.push(se(e.query,t))})),n},ye=function(e){return he(e,(function(e,t,n){return Ie(n)||!Ne(n)})).map((function(e){return function e(t){return t.filter(Ne).reduce((function(t,n){var r;return r=Fe(n.value)?n.value.map((function(t){return e([t])})):Re(n.value)?a(a({},t[n.path]),e(n.value)):Ue(n.value)?n.value.map(e):n.value,t[n.path]=r,t}),{})}(e||[])}))},ge=function(e){return he(e,(function(e,t,n){return Te(n)||Object(b.isArray)(n.value)})).map((function(e){return function e(t,n){void 0===n&&(n=[]);var r=[];return t.filter(Ne).forEach((function(t){Ie(t)&&Re(t.value)?r.push.apply(r,f(e(t.value,f(n,[t.path])))):r.push({path:f(n,[t.path]).join("."),value:t.value,filter:t.filter})})),r}(e||[])}))},$e=function e(t,n){if(void 0===n&&(n=!0),Object(b.isArray)(t)){var r=t.map((function(t){return Ne(t)?(r=(n=t).path,s=n.filter,o=n.value,""+r+s+$e(o)):e(t);var n,r,s,o})).join(", ");return n?Re(t)?"{"+r+"}":"["+r+"]":r}return JSON.stringify(t)},ve=function e(t,n,r){if(void 0===r&&(r=""),n){var s=n(t);if(void 0!==s)return s}if(Object(b.isArray)(t))return t.map((function(t){return e(t,n)})).join(r);if(Le(t))return t.type+"{"+$e(t.query,!1)+"}";if(Be(t))return" "+t.operator+" ";if(De(t))return""+t.constant;var o=Ve(t)?", ":"",a="";if(Je(t)){var i=u(t.args),c=i[0],l=i.slice(1);a=e(c,n)+", "+l.map((function(e){return $e(e)})).join(", ")}else a=e(t.args,n,o);return t.func+"("+a+")"},xe=function(e){return ve(ue(e),(function(e){if(Ge(e))return"("+ve(e.args,null," + ")+")"}))},je=function(e){return"id"in e?e.id:e.externalId},Ee=function(e){var t,n,r=[];try{for(var s=l(e),o=s.next();!o.done;o=s.next()){var a=o.value,i=ue(a),c=me(i);r.push.apply(r,f(c))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r},we=function(e){return e.reduce((function(e,t){return e[t.id]=t,t.externalId&&(e[t.externalId]=t),e}),{})},Ae=function(e){return void 0===e&&(e=[]),{query:e,type:"ts"}},Oe=function(e,t,n){return void 0===n&&(n="="),{path:e,value:t,filter:n}},Ce=function(e){return e.query.filter(Pe)},ke=function(e){return Ce(e).length},Se=function(e){return Ne(e)&&e.filter===k},_e=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return-1!==t.indexOf(e)},qe=function(e){return Se(e)&&_e(e.path,"granularity","aggregate","alignment")},Pe=function(e){return Se(e)&&_e(e.path,"id","externalId")},Ie=function(e){return Se(e)&&!qe(e)},Te=function(e){return Ne(e)&&!Se(e)},Fe=function(e){return Object(b.isArray)(e)&&e.some(Pe)},Ne=function(e){return Object(b.isObjectLike)(e)&&e.path&&e.filter&&"value"in e},Re=function(e){return Object(b.isArray)(e)&&e.length&&e.every(Ne)},Ue=function(e){return Object(b.isArray)(e)&&e.every(Re)},De=function(e){return Object(b.isObjectLike)(e)&&"constant"in e},Le=function(e){return Object(b.isObjectLike)(e)&&"ts"===e.type},Be=function(e){return Object(b.isObjectLike)(e)&&"operator"in e},Qe=function(e){return Object(b.isObjectLike)(e)&&"args"in e&&"func"in e},Me=function(e,t){return Qe(e)&&t===e.func},Je=function(e){return Me(e,"map")},Ge=function(e){return Me(e,"sum")},Ve=function(e){return Qe(e)&&_e(e.func,"avg","sum","min","max","pow","round","on_error")},We=Object(r.eventFactory)("failed-request"),He=Object(r.eventFactory)("datapoints-warning"),Ke="61s",Ye="61m",ze="11s",Ze="3m",Xe="cdf-oauth",et="cdf-api-key",tt=p.Asset,nt=p.Custom,rt=p.Timeseries,st=/{{([^{}]+)}}/g;function ot(e,t){return void 0===t&&(t=!0),Math.floor((t?1e4:1e5)/Math.min(e,100))}function at(e,t){return e.map((function(e){var n=e.target;return function(e,t,n){var r=t.tab,s=t.aggregation,o=t.granularity,i=u(Et(n.range),2),c=i[0],l=i[1];if(r===nt){var f=ot(e.length);return{items:e.map((function(e){return{expression:e.expression,start:c,end:l,limit:f}}))}}var p=null,m=s&&"none"!==s;m&&(p={aggregates:[s],granularity:o||S(n.intervalMs)});var b=ot(e.length,m);return a(a({},p),{end:l,start:c,items:e,limit:b})}(e.items,n,t)}))}function it(e,t,n){return i(this,void 0,Promise,(function(){var r,s;return c(this,(function(o){switch(o.label){case 0:switch(r=e.label||"",e.tab){case rt:return[3,1];case tt:return[3,3];case nt:return[3,5]}return[3,1];case 1:return[4,ct(r,yt(e),n)];case 2:return[2,[o.sent()]];case 3:return[4,ft({items:t.map((function(e){return{id:e.id}}))},n,!1)];case 4:return[2,o.sent().map((function(e){return lt(r,e)}))];case 5:return!r||ut(r)?(s=t.map((function(e){return e.expression})),[2,pe(s,r,n)]):[2,t.map((function(){return r}))];case 6:return[2]}}))}))}function ct(e,t,n){return i(this,void 0,Promise,(function(){var r,s,o;return c(this,(function(a){switch(a.label){case 0:return r=e,e&&ut(e)?[4,ft({items:[t]},n)]:[3,2];case 1:s=u.apply(void 0,[a.sent(),1]),o=s[0],r=lt(e,o),a.label=2;case 2:return[2,r]}}))}))}function lt(e,t){return e.replace(st,(function(e,n){return Object(b.get)(t,n,e)}))}function ut(e){return e&&!!e.match(st)}function ft(e,t,n){return void 0===n&&(n=!0),i(this,void 0,Promise,(function(){var r,s;return c(this,(function(o){switch(o.label){case 0:return r=h.POST,"items"in e?[4,t.fetchItems({data:e,method:r,path:"/timeseries/byids",cacheTime:Ye})]:[3,2];case 1:return s=o.sent(),[3,4];case 2:return[4,t.fetchAndPaginate({data:e,method:r,path:"/timeseries/list",cacheTime:Ke})];case 3:s=o.sent(),o.label=4;case 4:return[2,Object(b.cloneDeep)(n?s.filter((function(e){return!e.isString})):s)]}}))}))}function pt(e,t){var n=u(t,2),r=n[0],s=n[1],o=[];return e.forEach((function(e){var t=e.result,n=e.metadata.labels,a=t.config.data.aggregates,i=t.data.items,c=a?a+" ":"",l=i.map((function(e,t){var o=e.datapoints,i=e.externalId,l=e.id;return{target:n&&n[t]||""+c+(i||l),datapoints:function(e,t){return e.map((function(e){return[(r=t)in(n=e)?n[r]:n.value,n.timestamp];var n,r}))}(o.filter((function(e){var t=e.timestamp;return t>=r&&t<=s})),a)}}));o.push.apply(o,f(l))})),o}function mt(e,t){return i(this,void 0,Promise,(function(){var n,r,s;return c(this,(function(o){switch(o.label){case 0:return n=e.map(t),[4,Promise.all(n)];case 1:return r=o.sent(),s=r.filter((function(e){return e.isErr})).map((function(e){return e.error})),[2,{succeded:r.filter((function(e){return e.isOk})).map((function(e){return e.value})),failed:s}]}}))}))}function bt(e,t){return e.some((function(e){return e.datapoints.length>=t}))?"Datapoints limit was reached, so not all datapoints may be shown. Try increasing the granularity, or choose a smaller time range.":""}function dt(e){var t=new Set;return e.forEach((function(e){e.datapoints.map((function(e){return e.error})).filter(Boolean).forEach((function(e){t.add(e)}))})),Array.from(t).join("\n")}function ht(e){return"/timeseries/"+(e?"synthetic/query":"data/list")}var yt=function(e){return"externalId"===e.targetRefType?{externalId:e.target}:{id:e.target}},gt=function(){function e(e,t,n,r){var s=this;this.project=e,this.apiUrl=t,this.backendSrv=n,this.oauthPassThru=r,this.cachedRequests=new Map,this.cachedRequest=function(e,t){return void 0===t&&(t=ze),i(s,void 0,Promise,(function(){var n,r,s,o,a=this;return c(this,(function(l){return e.requestId,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}(e,["requestId"]),r=JSON.stringify(n),s=w()(t),this.cachedRequests.has(r)?[2,this.cachedRequests.get(r)]:(o=i(a,void 0,void 0,(function(){var t,n,o=this;return c(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.backendSrv.datasourceRequest(e)];case 1:if(g(t=a.sent()))throw t;return setTimeout((function(){return o.cachedRequests.delete(r)}),s),[2,t];case 2:throw n=a.sent(),this.cachedRequests.delete(r),n;case 3:return[2]}}))})),this.cachedRequests.set(r,o),[2,o])}))}))}}return e.prototype.fetchData=function(e){var t,n=e.path,r=e.data,s=e.method,o=e.params,a=e.requestId,i=e.cacheTime,c=o?"?"+(t=o,Object(j.stringify)(Object(b.omitBy)(t,b.isNil))):"",l={url:this.apiUrlAuth+"/api/v1/projects/"+this.project+n+c,data:r,method:s};return a&&(l.requestId=a),this.cachedRequest(l,i)},e.prototype.chunkAndFetch=function(e,t){return void 0===t&&(t=100),i(this,void 0,Promise,(function(){var n,r,s,o,i,l,u,p=this;return c(this,(function(c){switch(c.label){case 0:return n=e.data,r=e.requestId,s=Object(b.chunk)(n.items,t),o=s.map((function(t,s){return a(a(a({},e),$t(r,s)),{data:a(a({},n),{items:t})})})),i=o.map((function(e){return p.fetchData(e)})),[4,Promise.all(i)];case 1:return l=c.sent(),u=l.reduce((function(e,t){return f(e,t.data.items)}),[]),[2,a(a({},l[0]),{data:a(a({},l[0].data),{items:u})})]}}))}))},e.prototype.fetchItems=function(e){return i(this,void 0,Promise,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.fetchData(e)];case 1:return[2,t.sent().data.items]}}))}))},e.prototype.fetchAndPaginate=function(e){return i(this,void 0,void 0,(function(){var t,n,r,s,o,i,l;return c(this,(function(c){switch(c.label){case 0:return t=1e3,n=e.data,r=n.limit||t,[4,this.fetchData(a(a({},e),{data:a(a({},n),{limit:Math.min(t,r)})}))];case 1:s=c.sent().data,o=s.nextCursor,i=s.items,c.label=2;case 2:return o&&r>i.length?[4,this.fetchData(a(a({},e),{data:a(a({},n),{cursor:o,limit:t})}))]:[3,4];case 3:return l=c.sent().data,o=l.nextCursor,i=f(i,l.items),[3,2];case 4:return i.length>r&&(i.length=r),[2,i]}}))}))},e.prototype.request=function(e){var t=e.path,n=e.method,r=void 0===n?h.GET:n;return this.backendSrv.datasourceRequest({method:r,url:this.apiUrlAuth+"/"+t})},Object.defineProperty(e.prototype,"apiUrlAuth",{get:function(){var e=this.oauthPassThru?Xe:et;return this.apiUrl+"/"+e},enumerable:!1,configurable:!0}),e}(),$t=function(e,t){return e?{requestId:t?""+e+t:e}:void 0},vt=m.SystemJS.load("app/core/app_events"),xt=function(e){function t(t){var n=e.call(this,t)||this;n.fetchSingleTimeseries=function(e){return function(e,t){return t.fetchItems({data:{items:[e]},path:"/timeseries/byids",method:h.POST,cacheTime:Ye})}(e,n.connector)},n.fetchSingleAsset=function(e){return function(e,t){return t.fetchItems({data:{items:[e]},path:"/assets/byids",method:h.POST,cacheTime:Ye})}(e,n.connector)};var r=t.url,s=t.jsonData,o=s.cogniteProject,a=s.oauthPassThru;return n.backendSrv=Object(m.getBackendSrv)(),n.templateSrv=Object(m.getTemplateSrv)(),n.url=r,n.connector=new gt(o,r,n.backendSrv,a),n.project=o,n}return o(t,e),t.prototype.query=function(e){return i(this,void 0,Promise,(function(){var t,n,r,s,o,a;return c(this,(function(i){switch(i.label){case 0:if(c=e.targets,t=c.filter((function(e){if(e&&!e.hide){var t=e.tab,n=e.assetQuery;switch(t){case p.Asset:return n&&n.target;case p.Custom:return e.expr;case p.Timeseries:default:return e.target}}return!1})),n=[],!t.length)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchTimeseriesForTargets(t,e)];case 2:return r=i.sent(),s=r.failed,o=r.succeded,function(e){e.filter(g).filter((function(e){return!e.error.cancelled})).forEach((function(e){return wt(e.error,e.metadata.target.refId)}))}(s),o.forEach((function(e){var t=e.result,n=e.metadata,r=t.data.items,s=t.config.data.limit,o=n.target.refId,a=[bt(r,s),dt(r)].filter(Boolean).join("\n");a&&vt.then((function(e){return e.emit(He,{refId:o,warning:a})}))})),n=pt(o,Et(e.range)),[3,4];case 3:return a=i.sent(),console.error(a),[3,4];case 4:return[2,{data:n}]}var c}))}))},t.prototype.fetchTimeseriesForTargets=function(e,t){return i(this,void 0,Promise,(function(){var n,r,s,o,a,l=this;return c(this,(function(f){switch(f.label){case 0:return n=e.map((function(e){return i(l,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getDataQueryRequestItems(e,t)];case 1:return n=r.sent(),[3,3];case 2:return wt(r.sent(),e.refId),[3,3];case 3:return[2,{items:n,target:e}]}}))}))})),[4,Promise.all(n)];case 1:return r=f.sent().filter((function(e){var t;return null===(t=null==e?void 0:e.items)||void 0===t?void 0:t.length})),s=at(r,t),[4,Promise.all(r.map((function(e){var n=e.target,r=e.items;return i(l,void 0,void 0,(function(){var e,s=this;return c(this,(function(o){switch(o.label){case 0:e=[],o.label=1;case 1:return o.trys.push([1,3,,4]),[4,it(n,r,this.connector)];case 2:return e=o.sent().map((function(e){return s.replaceVariable(e,t.scopedVars)})),[3,4];case 3:return wt(o.sent(),n.refId),[3,4];case 4:return[2,{target:n,labels:e}]}}))}))})))];case 2:return o=f.sent(),a=function(e){var n=u(e,2),r=n[0],s=n[1];return i(l,void 0,void 0,(function(){var e,n,o,a,i,l;return c(this,(function(c){switch(c.label){case 0:e=s.target,n=r.items.some((function(e){return!!e.expression})),o=n?10:100,a={data:r,path:ht(n),method:h.POST,requestId:_(t,e)},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.connector.chunkAndFetch(a,o)];case 2:return i=c.sent(),[2,new v({result:i,metadata:s})];case 3:return l=c.sent(),[2,new x({error:l,metadata:s})];case 4:return[2]}}))}))},[2,mt(s.map((function(e,t){return[e,o[t]]})),a)]}}))}))},t.prototype.getDataQueryRequestItems=function(e,t){return i(this,void 0,Promise,(function(){var n,r,s,o;return c(this,(function(a){switch(a.label){case 0:switch(n=e.tab,e.target,e.assetQuery,r=e.expr,n){case void 0:case p.Timeseries:return[3,1];case p.Asset:return[3,2];case p.Custom:return[3,4]}return[3,1];case 1:return[2,[yt(e)]];case 2:return[4,this.findAssetTimeseries(e,t)];case 3:return[2,a.sent().map((function(e){return{id:e.id}}))];case 4:return s=this.replaceVariable(r,t.scopedVars),o=S(t.intervalMs),[2,ae(s,e,this.connector,o)];case 5:return[2]}}))}))},t.prototype.replaceVariable=function(e,t){return this.templateSrv.replace(e.trim(),t)},t.prototype.annotationQuery=function(e){return i(this,void 0,Promise,(function(){var t,n,r,s,o,i,l,f,p,m,b,d,y,g;return c(this,(function(c){switch(c.label){case 0:return t=e.range,n=e.annotation,r=n.query,s=n.error,o=u(Et(t),2),i=o[0],l=o[1],s||!r?[2,[]]:(f=this.replaceVariable(r),p=re(f),m=p.filters,b=p.params,d={startTime:{max:l},endTime:{min:i}},y={filter:a(a({},b),d),limit:1e3},[4,this.connector.fetchItems({data:y,path:"/events/list",method:h.POST})]);case 1:return g=c.sent(),[2,q(g,m).map((function(e){var t=e.description,r=e.startTime,s=e.endTime,o=e.type;return{annotation:n,isRegion:!0,text:t,time:r,timeEnd:s,title:o}}))]}}))}))},t.prototype.getOptionsForDropdown=function(e,t,n){return i(this,void 0,Promise,(function(){var r,s,o;return c(this,(function(a){switch(a.label){case 0:return(o={})[p.Asset]="assets",o[p.Timeseries]="timeseries",r=o,s=e?{search:{query:e}}:{},[4,this.connector.fetchItems({data:s,path:"/"+r[t]+"/search",method:h.POST,params:n,cacheTime:Ze})];case 1:return[2,a.sent().map(jt)]}}))}))},t.prototype.findAssetTimeseries=function(e,t){var n=e.refId,r=e.assetQuery,s=t.scopedVars;return i(this,void 0,Promise,(function(){var e,t,o;return c(this,(function(a){switch(a.label){case 0:return e=this.replaceVariable(r.target,s),[4,ft({filter:r.includeSubtrees?{assetSubtreeIds:[{id:Number(e)}]}:{assetIds:[e]},limit:t=101},this.connector)];case 1:return(o=a.sent()).length!==t?[3,3]:[4,vt];case 2:a.sent().emit(He,{refId:n,warning:"Only showing first 100 timeseries. To get better results, either change the selected asset or use 'Custom Query'."}),o.splice(-1),a.label=3;case 3:return[2,o]}}))}))},t.prototype.metricFindQuery=function(e){var t=e.query;return i(this,void 0,Promise,(function(){var e,n,r,s,o;return c(this,(function(a){switch(a.label){case 0:try{o=re(t),e=o.params,n=o.filters}catch(e){return[2,[]]}return r={filter:e,limit:1e3},[4,this.connector.fetchItems({data:r,path:"/assets/list",method:h.POST})];case 1:return s=a.sent(),[2,q(s,n).map((function(e){return{text:e.name,value:e.id}}))]}}))}))},t.prototype.testDatasource=function(){return i(this,void 0,void 0,(function(){var e,t,n,r,s;return c(this,(function(o){switch(o.label){case 0:return[4,this.connector.request({path:"login/status"})];case 1:if(e=o.sent(),t=e.status,n=e.data,200===t)return r=(null==n?void 0:n.data)||{},s=r.project,!r.loggedIn||s!==this.project&&s?[2,{status:"error",message:"Your Cognite credentials are invalid",title:"Error"}]:[2,{status:"success",message:"Your Cognite credentials are valid",title:"Success"}];throw Error("Did not get 200 OK")}}))}))},t}(r.DataSourceApi);function jt(e){var t=e.id,n=e.name,r=e.externalId,s=e.description,o=t.toString();return{label:n||r||o,value:o,description:s,externalId:r,id:t}}function Et(e){return[e.from.valueOf(),e.to.valueOf()]}function wt(e,t){var n=function(e){var t,n,r,s=e.data,o=e.status,a=(null===(t=null==s?void 0:s.error)||void 0===t?void 0:t.message)||e.message,i=(null===(n=null==s?void 0:s.error)||void 0===n?void 0:n.missing)&&(null===(r=null==s?void 0:s.error)||void 0===r?void 0:r.missing.map(JSON.stringify));return a?"["+(o?o+" ":"")+"ERROR] "+a+(i?"\nMissing: "+i:""):"Unknown error"}(e);vt.then((function(e){return e.emit(We,{refId:t,error:n})}))}var At=n(0),Ot=n.n(At),Ct=n(2),kt=function(e){var t=e.onCheat,n=[38,38,40,40,37,39,37,39,66,65],r=0;return Object(At.useEffect)((function(){var e=function(e){var s=e.keyCode;n[r]===s?r+=1:r=0,r>=n.length&&(r=0,t())};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[t]),Ot.a.createElement("div",null)},St=function(e){var t=e.featureFlags;return Object.values(t).filter(Boolean).length?Ot.a.createElement("pre",{className:"gf-formatted-warning"},"Experimental features enabled: ",Object.keys(t)):Ot.a.createElement(Ot.a.Fragment,null)},_t=(n(14),Ct.LegacyForms.SecretFormField),qt=Ct.LegacyForms.FormField,Pt=Ct.LegacyForms.Switch;var It=n(29),Tt=n.n(It),Ft=function(e){var t=e.children;return Ot.a.createElement("code",{className:"query-keyword"},t)},Nt=Ot.a.createElement("div",{className:"gf-form--grow"},Ot.a.createElement("pre",null,"Format: ",Ot.a.createElement(Ft,null,"ts{options}"),Ot.a.createElement("br",null),"Options are of the form: ",Ot.a.createElement(Ft,null,"PROPERTY COMPARATOR VALUE"),Ot.a.createElement("br",null),Ot.a.createElement("br",null),"Comparator can be either:",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"=")," (strict equality),",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"!=")," (strict inequality),",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"=~")," (regex equality),",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"!~")," (regex inequality)",Ot.a.createElement("br",null),Ot.a.createElement("br",null),"If you want to reference a specific time series, use:",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"ts{id=ID}"),", or"," ",Ot.a.createElement(Ft,null,"ts{externalId='EXTERNAL_ID', aggregate='AGGREGATE', granularity='GRANULARITY', alignment=ALIGNMENT}"),".",Ot.a.createElement("br",null),"Example: ",Ot.a.createElement(Ft,null,'sum(ts{metadata{type="TEMP"}}) - ts{id=12345678}'),Ot.a.createElement("br",null),Ot.a.createElement("br",null),"Templated variables can also be used with ",Ot.a.createElement(Ft,null,"$variable"),".",Ot.a.createElement("br",null),"Example:"," ",Ot.a.createElement(Ft,null,"ts{assetIds=[$asset], metadata={key1=~'.*test.*'}, isStep=1, granularity='12h', aggregate='average'}"),Ot.a.createElement("br",null),Ot.a.createElement("br",null),"In case of multi-value variable, return value can be formatted. To format variable value use"," ",Ot.a.createElement(Ft,null,"${variable:[formatter]}"),".",Ot.a.createElement("br",null),"Example: ",Ot.a.createElement(Ft,null,"ts{assetIds=[${asset:csv}], granularity='12h', aggregate='average'}")," ",Ot.a.createElement("br",null),Ot.a.createElement("br",null),"Check"," ",Ot.a.createElement("a",{className:"query-keyword",href:"https://grafana.com/docs/grafana/latest/reference/templating/#advanced-formatting-options"},"Grafana documentation")," ","to get list of available formatters.",Ot.a.createElement("br",null),Ot.a.createElement("br",null),"Synthetic timeseries functions can also be applied on one or multiple timeseries.",Ot.a.createElement("br",null),"Example: ",Ot.a.createElement(Ft,null,"(ts{name=~'.*temp.*', aggregate='average'} - 32) * 5/9"),Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"ts{} + sin(ts{granularity='24h', aggregate='average'})"),Ot.a.createElement("br",null),Ot.a.createElement("br",null),"Variable length functions (sum, max, min, avg) can also be applied to all filtered timeseries. Examples:",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,'sum(ts{metadata={type="TEMP"}})'),Ot.a.createElement("br",null),"↪ yields one timeseries that is thesum of all temperature timeseries",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"max(ts{aggregate='average'}) - min(ts{aggregate='average'})"),Ot.a.createElement("br",null),"↪ yields the range of the timeseries aggregated by averages",Ot.a.createElement("br",null),Ot.a.createElement(Ft,null,"pow(ts{} - avg(ts{}), 2)"),Ot.a.createElement("br",null),"↪ yields the squared deviation of each timeseries from the average ",Ot.a.createElement("br",null),Ot.a.createElement("br",null),"There is a support for some advanced functions, like ",Ot.a.createElement(Ft,null,"round"),", ",Ot.a.createElement(Ft,null,"on_error")," ","and ",Ot.a.createElement(Ft,null,"map"),".",Ot.a.createElement("br",null),"The documentation on how to use them can be found on"," ",Ot.a.createElement("a",{className:"query-keyword",href:"https://docs.cognite.com/dev/concepts/resource_types/timeseries.html#synthetic-time-series"},"docs.cognite.com/dev"),".",Ot.a.createElement("br",null),Ot.a.createElement("br",null),"To learn more about the querying capabilities of Cognite Data Source for Grafana, please visit our"," ",Ot.a.createElement("a",{className:"query-keyword",href:"https://docs.cognite.com/cdf/dashboards/guides/grafana/getting_started.html"},"documentation"),".")),Rt=(n(74),Ct.LegacyForms.FormField),Ut=function(e){var t=e.id,n=e.externalId;return n?{target:n,targetRefType:"externalId"}:{target:t,targetRefType:"id"}};function Dt(e){var t=this,n=e.query,r=e.onTargetQueryChange,s=e.resourceType,o=e.searchResource,a=e.fetchSingleResource,l=u(Object(At.useState)({}),2),f=l[0],p=l[1],m=u(Object(At.useState)(),2),b=m[0],d=m[1],h=function(e){return i(t,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a(e)];case 1:return t=u.apply(void 0,[n.sent(),1]),[2,t[0]];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))};return Object(At.useEffect)((function(){var e=yt(n);d(e.externalId),h(e).then((function(e){return i(t,void 0,void 0,(function(){return c(this,(function(t){return e&&(p(jt(e)),function(e){e.externalId&&"externalId"!==n.targetRefType&&r(Ut(e),!1)}(e),d(e.externalId)),[2]}))}))}))}),[]),Ot.a.createElement("div",{className:"gf-form gf-form-inline"},Ot.a.createElement(Ct.InlineFormLabel,{width:7,tooltip:s+" name"},f.value?"Name":"Search"),Ot.a.createElement(Ct.AsyncSelect,{loadOptions:o,defaultOptions:!0,value:f.value?f:null,placeholder:"Search "+s.toLowerCase()+" by name/description",className:"width-20",onChange:function(e){d(e.externalId),p(e),r(Ut(e))}}),Ot.a.createElement(Rt,{label:"External Id",labelWidth:7,inputWidth:20,onBlur:function(e){var n,s=e.target;return n=s.value,i(t,void 0,void 0,(function(){var e,t;return c(this,(function(s){switch(s.label){case 0:return[4,h({externalId:n})];case 1:return e=s.sent(),t=e?jt(e):{},p(t),r(Ut({externalId:n})),[2]}}))}))},onChange:function(e){var t=e.target;return d(t.value)},value:b||"",placeholder:f.value?"No external id present":"Insert external id",tooltip:s+" external id"}))}var Lt=Ct.LegacyForms.FormField,Bt=m.SystemJS.load("app/core/app_events"),Qt=[{value:"none",label:"None"},{value:"average",label:"Average"},{value:"max",label:"Max"},{value:"min",label:"Min"},{value:"count",label:"Count"},{value:"sum",label:"Sum"},{value:"interpolation",label:"Interpolation"},{value:"stepInterpolation",label:"Step Interpolation"},{value:"continuousVariance",label:"Continuous Variance"},{value:"discreteVariance",label:"Discrete Variance"},{value:"totalVariation",label:"Total Variation"}],Mt=function(e){var t=e.query,n=e.onQueryChange;return t.aggregation&&"none"!==t.aggregation&&Ot.a.createElement("div",{className:"gf-form"},Ot.a.createElement(Lt,{label:"Granularity",labelWidth:6,inputWidth:10,onChange:function(e){var t=e.target;return n({granularity:t.value})},value:t.granularity,placeholder:"default",tooltip:"The granularity of the aggregate values. Valid entries are: 'day' (or 'd'), 'hour' (or 'h'), 'minute' (or 'm'), 'second' (or 's'). Example: 12h."}))},Jt=function(e){var t=e.query,n=e.onQueryChange;return Ot.a.createElement("div",{className:"gf-form"},Ot.a.createElement(Ct.InlineFormLabel,{width:6},"Aggregation"),Ot.a.createElement(Ct.Select,{onChange:function(e){var t=e.value;return n({aggregation:t})},options:Qt,menuPosition:"fixed",value:t.aggregation,className:"width-10"}))},Gt=function(e){var t=e.query,n=e.onQueryChange;return Ot.a.createElement("div",{className:"gf-form gf-form--grow"},Ot.a.createElement(Lt,{label:"Label",labelWidth:6,inputWidth:10,onChange:function(e){var t=e.target;return n({label:t.value})},value:t.label,placeholder:"default",tooltip:"Set the label for each time series. Can also access time series properties via {{property}}. Eg: {{description}}-{{metadata.key}}"}))},Vt=function(e){var t=e.onQueryChange,n=e.query;return Ot.a.createElement("div",{className:"gf-form-inline"},Ot.a.createElement(Jt,a({},{onQueryChange:t,query:n})),Ot.a.createElement(Mt,a({},{onQueryChange:t,query:n})),Ot.a.createElement(Gt,a({},{onQueryChange:t,query:n})))},Wt=function(e){var t=e.query,n=e.onQueryChange,r=t.assetQuery.includeSubtrees;return Ot.a.createElement("div",{className:"gf-form"},Ot.a.createElement(Ct.InlineFormLabel,{width:9},"Include sub-assets"),Ot.a.createElement("div",{className:"gf-form-switch"},Ot.a.createElement(Ct.Switch,{css:"",value:r,onChange:function(e){var r,s=e.currentTarget;return r=s.checked,void n({assetQuery:a(a({},t.assetQuery),{includeSubtrees:r})})}})))};function Ht(e){var t=this,n=e.query,r=e.datasource,s=e.onQueryChange,o=u(Object(At.useState)({value:n.assetQuery.target}),2),l=o[0],f=o[1];return Object(At.useEffect)((function(){s({assetQuery:a(a({},n.assetQuery),{target:l.value})})}),[l.value]),Object(At.useEffect)((function(){var e;l.value&&!l.label&&(e=+l.value,i(t,void 0,void 0,(function(){var t,n;return c(this,(function(s){switch(s.label){case 0:return[4,r.fetchSingleAsset({id:e})];case 1:return t=u.apply(void 0,[s.sent(),1]),n=t[0],f(jt(n)),[2]}}))})))}),[l.value]),Ot.a.createElement("div",{className:"gf-form-inline"},Ot.a.createElement("div",{className:"gf-form"},Ot.a.createElement(Ct.InlineFormLabel,{width:6},"Asset Tag"),Ot.a.createElement(Ct.AsyncSelect,{loadOptions:function(e){return r.getOptionsForDropdown(e,"Asset")},value:l,defaultOptions:!0,placeholder:"Search asset by name/description",className:"width-20",onChange:f})),Ot.a.createElement(Wt,a({},{onQueryChange:s,query:n})),Ot.a.createElement(Vt,a({},{onQueryChange:s,query:n})))}function Kt(e){var t=e.query,n=e.datasource,r=e.onQueryChange;return Ot.a.createElement("div",null,Ot.a.createElement(Dt,a({},{query:t,onTargetQueryChange:r,resourceType:p.Timeseries,fetchSingleResource:n.fetchSingleTimeseries,searchResource:function(e){return n.getOptionsForDropdown(e,p.Timeseries)}})),Ot.a.createElement(Vt,a({},{query:t,onQueryChange:r})))}function Yt(e){var t=e.query,n=e.onQueryChange,r=u(Object(At.useState)(!1),2),s=r[0],o=r[1],i=u(Object(At.useState)(t.expr),2),c=i[0],l=i[1];return Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement("div",{className:"gf-form"},Ot.a.createElement(Lt,{label:"Query",labelWidth:6,inputWidth:30,className:"custom-query",onChange:function(e){var t=e.target;return l(t.value)},onBlur:function(){return n({expr:c})},value:c,tooltip:"Click help button for help."}),Ot.a.createElement(Ct.Icon,{name:"question-circle",onClick:function(){return o(!s)}})),Ot.a.createElement(Vt,a({},{onQueryChange:n,query:t})),s&&Nt)}var zt=function(){function e(){}return e.prototype.onBlur=function(){this.annotation.error="";try{var e=this.datasource.replaceVariable(this.annotation.query);re(e)}catch(e){var t=e.message;this.annotation.error=t}},e.templateUrl="partials/annotations.editor.html",e}(),Zt=Ot.a.createElement("pre",null,"Variable query uses the"," ",Ot.a.createElement("a",{className:"query-keyword",href:"https://docs.cognite.com/api/v1/#operation/listAssets",target:"_blank",rel:"noreferrer"},"assets/list")," ","endpoint for data fetching. ",Ot.a.createElement("code",{className:"query-keyword"},"'='")," sign is used to provide parameters for the request.",Ot.a.createElement("br",null),"Format: ",Ot.a.createElement("code",{className:"query-keyword"},"assets{param=value,...}"),Ot.a.createElement("br",null),"Example:"," ",Ot.a.createElement("code",{className:"query-keyword"},"assets{assetSubtreeIds=[{id=123}, {externalId='external'}]}"),Ot.a.createElement("br",null),Ot.a.createElement("br",null),"Results filtering is also possible by adding"," ",Ot.a.createElement("code",{className:"query-keyword"},"'=~'"),","," ",Ot.a.createElement("code",{className:"query-keyword"},"'!~'")," and"," ",Ot.a.createElement("code",{className:"query-keyword"},"'!='")," signs to props. Applying few filters for query acts as logic AND",Ot.a.createElement("br",null),"Format:",Ot.a.createElement("br",null),Ot.a.createElement("code",{className:"query-keyword"},"'=~'")," – regex equality, means that provided regexp is used to match defined prop and matched value will be included",Ot.a.createElement("br",null),Ot.a.createElement("code",{className:"query-keyword"},"'!~'")," – regex inequality, means that provided regexp is used to match defined prop and matched value will be excluded",Ot.a.createElement("br",null),Ot.a.createElement("code",{className:"query-keyword"},"'!='")," – strict inequality, means that provided string is used to strict prop comparing and matched value will be excluded",Ot.a.createElement("br",null),"Example:"," ",Ot.a.createElement("code",{className:"query-keyword"},"assets{metadata={KEY='value', KEY_2=~'value.*'}, assetSubtreeIds=[{id=123}]}"),"To learn more about the querying capabilities of Cognite Data Source for Grafana, please visit our"," ",Ot.a.createElement("a",{className:"query-keyword",href:"https://docs.cognite.com/cdf/dashboards/guides/grafana/getting_started.html"},"documentation"),"."),Xt=function(e){function t(t){var n=e.call(this,t)||this;n.defaults={query:"",error:""},n.handleQueryChange=function(e){n.setState({query:e.target.value,error:""})},n.handleBlur=function(){var e=n.props.onChange,t=n.state.query;try{re(t),e({query:t},t)}catch(t){var r=t.message;n.setState({error:r}),e({query:""},"")}};var r=t.query;return n.state=Object.assign(n.defaults,r),n}return o(t,e),t.prototype.render=function(){var e=this.state,t=e.query,n=e.error;return Ot.a.createElement("div",null,Ot.a.createElement("div",{className:"gf-form gf-form--grow"},Ot.a.createElement("span",{className:"gf-form-label query-keyword fix-query-keyword width-10"},"Query"),Ot.a.createElement("input",{type:"text",className:"gf-form-input",value:t,onChange:this.handleQueryChange,onBlur:this.handleBlur,placeholder:"eg: assets{name='example', assetSubtreeIds=[{id=123456789, externalId='externalId'}]}"})),Ot.a.createElement("div",{className:"gf-form--grow"},n?Ot.a.createElement("pre",{className:"gf-formatted-error"},n):null,Zt))},t}(Ot.a.PureComponent);n.d(t,"plugin",(function(){return en}));var en=new r.DataSourcePlugin(xt).setConfigEditor((function(e){var t=u(Object(At.useState)(!1),2),n=t[0],r=t[1],s=e.onOptionsChange,o=e.options,i=o.secureJsonData,c=void 0===i?{}:i,l=o.jsonData,f=o.secureJsonFields,p=c.cogniteDataPlatformApiKey,m=void 0===p?"":p,b=l.cogniteProject,d=void 0===b?"":b,h=l.cogniteApiUrl,y=void 0===h?"":h,g=l.featureFlags,$=void 0===g?{}:g,v=l.oauthPassThru,x=function(e){s(a(a({},o),{jsonData:a(a({},l),e)}))};return Ot.a.createElement(Ot.a.Fragment,null,Ot.a.createElement("div",{className:"gf-form-group"},Ot.a.createElement("h3",{className:"page-heading"},"HTTP"),Ot.a.createElement("div",{className:"gf-form-inline"},Ot.a.createElement(qt,{label:"Project",labelWidth:6,inputWidth:20,onChange:function(e){x({cogniteProject:e.target.value})},value:d,placeholder:"Cognite Data Fusion project",tooltip:"Cognite Data Fusion project name."})),Ot.a.createElement("div",{className:"gf-form-inline"},Ot.a.createElement(qt,{label:"API URL",labelWidth:6,inputWidth:20,onChange:function(e){x({cogniteApiUrl:e.target.value})},value:y,placeholder:"api.cognitedata.com",tooltip:"This is the URL used to reach the API.\nIf the project is deployed on the default multi-tenant installation (most are),\nthen keep the default value and do not change the URL.\nIf the project is deployed on a separate custom cluster,\nthen change the URL to point at the API server for that cluster.\nIf unsure, leave the URL as default."}))),Ot.a.createElement("div",{className:"gf-form-group"},Ot.a.createElement("h3",{className:"page-heading"},"Auth ",Ot.a.createElement(Ct.Icon,{name:"question-circle",onClick:function(){return r(!n)}})),n&&Ot.a.createElement("pre",null,"Find out more about authentication at"," ",Ot.a.createElement("a",{href:"https://docs.cognite.com/cdf/dashboards/guides/grafana/admin.html#step-3-configure-the-cognite-data-source-for-grafana"},"docs.cognite.com/cdf/dashboards/guides/grafana/admin.html")),Ot.a.createElement("div",{className:"gf-form-inline"},$.oauthPassThru&&Ot.a.createElement(Pt,{label:"Forward OAuth Identity",labelClass:"width-13",checked:v,onChange:function(e){x({oauthPassThru:e.currentTarget.checked})},tooltip:"Forward the user's upstream OAuth identity to the data source\n(Their access token gets passed along)."})),!v&&Ot.a.createElement("div",{className:"gf-form-inline"},Ot.a.createElement("div",{className:"gf-form"},Ot.a.createElement(_t,{isConfigured:f.cogniteDataPlatformApiKey,value:m,label:"API Key",placeholder:"Cognite Data Fusion API key",tooltip:"Cognite Data Fusion API key.",labelWidth:6,inputWidth:20,onReset:function(){s(a(a({},o),{secureJsonFields:a(a({},o.secureJsonFields),{cogniteDataPlatformApiKey:!1}),secureJsonData:a(a({},o.secureJsonData),{cogniteDataPlatformApiKey:""})}))},onChange:function(e){s(a(a({},o),{secureJsonData:{cogniteDataPlatformApiKey:e.target.value}}))}}))),Ot.a.createElement(kt,{onCheat:function(){x({featureFlags:a(a({},$),{oauthPassThru:!$.oauthPassThru})})}}),Ot.a.createElement(St,{featureFlags:$})))})).setVariableQueryEditor(Xt).setQueryEditor((function(e){var t=this,n=e.query,r=e.onChange,s=e.onRunQuery,o=e.datasource,l=Tt()(n,y),f=l.refId,m=l.tab,b=u(Object(At.useState)(""),2),d=b[0],h=b[1],g=u(Object(At.useState)(""),2),$=g[0],v=g[1],x=function(e,t){void 0===t&&(t=!0),r(a(a({},l),e)),t&&(h(""),v(""),s())},j=function(e){return function(){x({tab:e})}},E=function(e){var t=e.refId,n=e.error;f===t&&h(n)},w=function(e){var t=e.refId,n=e.warning;f===t&&v(n)};return Object(At.useEffect)((function(){return i(t,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return[4,Bt];case 1:return(e=t.sent()).on(We,E),e.on(He,w),[2]}}))})),function(){return i(t,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return[4,Bt];case 1:return(e=t.sent()).off(We,E),e.off(He,w),[2]}}))}))}}),[m]),Ot.a.createElement("div",null,Ot.a.createElement(Ct.TabsBar,null,Object.values(p).map((function(e){return Ot.a.createElement(Ct.Tab,{css:"",label:e,key:e,active:m===e,onChangeTab:j(e)})}))),Ot.a.createElement(Ct.TabContent,null,m===p.Asset&&Ot.a.createElement(Ht,a({},{onQueryChange:x,query:l,datasource:o})),m===p.Timeseries&&Ot.a.createElement(Kt,a({},{onQueryChange:x,query:l,datasource:o})),m===p.Custom&&Ot.a.createElement(Yt,a({},{onQueryChange:x,query:l,onRunQuery:s}))),d&&Ot.a.createElement("pre",{className:"gf-formatted-error"},d),$&&Ot.a.createElement("pre",{className:"gf-formatted-warning"},$))})).setAnnotationQueryCtrl(zt)}])}));
//# sourceMappingURL=module.js.map